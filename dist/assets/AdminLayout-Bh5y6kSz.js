import{q as U,b as L,H as E,s as m,ae as Me,I as H,af as $,ag as J,p as G,Q as ge,ah as z,ai as K,S as he,a2 as A,t as Q,a as o,v as Z,C as ye,a1 as j,aj as pe,ak as be,al as we,am as Ne,Z as Se,L as ke,M as Ve,an as Ce,ao as Te,N as xe,ap as Be,aq as _e,ar as Ie,D as Le,as as Re,at as De,a3 as ze,au as Ae,Y as Ye,a4 as Oe,av as We,aw as Fe,ax as Ue,ay as $e,F as Xe,az as qe,aA as Ze,d as je,aB as Je,c as se,w as V,V as Ge,e as Ke,f as Y,aC as Qe,aD as X,aE as O,aF as ie,aG as W,j as I,J as et,h as ce,a9 as ve,r as tt,aH as at,aI as lt,aJ as nt,i as ot,aK as ut,o as q,aL as rt}from"./index-CkNYxJqC.js";import{u as st}from"./period.stores-D57Bv0Ck.js";import{u as ee,m as te,V as it,a as ct}from"./VMain-B7cj2KcL.js";import{V as de,m as vt}from"./VToolbar-BD-4v_qw.js";const dt=U({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function mt(e){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:r}=g;let p=0,t=0;const a=L(null),l=E(0),v=E(0),S=E(0),u=E(!1),s=E(!1),n=m(()=>Number(e.scrollThreshold)),i=m(()=>Me((n.value-l.value)/n.value||0)),c=()=>{const d=a.value;if(!d||r&&!r.value)return;p=l.value,l.value="window"in d?d.pageYOffset:d.scrollTop;const k=d instanceof Window?document.documentElement.scrollHeight:d.scrollHeight;if(t!==k){t=k;return}s.value=l.value<p,S.value=Math.abs(l.value-n.value)};return H(s,()=>{v.value=v.value||l.value}),H(u,()=>{v.value=0}),$(()=>{H(()=>e.scrollTarget,d=>{var P;const k=d?document.querySelector(d):window;k&&k!==a.value&&((P=a.value)==null||P.removeEventListener("scroll",c),a.value=k,a.value.addEventListener("scroll",c,{passive:!0}))},{immediate:!0})}),J(()=>{var d;(d=a.value)==null||d.removeEventListener("scroll",c)}),r&&H(r,c,{immediate:!0}),{scrollThreshold:n,currentScroll:l,currentThreshold:S,isScrollActive:u,scrollRatio:i,isScrollingUp:s,savedScroll:v}}const ft=U({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...vt(),...te(),...dt(),height:{type:[Number,String],default:64}},"VAppBar"),gt=G()({name:"VAppBar",props:ft(),emits:{"update:modelValue":e=>!0},setup(e,g){let{slots:r}=g;const p=L(),t=ge(e,"modelValue"),a=m(()=>{var B;const y=new Set(((B=e.scrollBehavior)==null?void 0:B.split(" "))??[]);return{hide:y.has("hide"),fullyHide:y.has("fully-hide"),inverted:y.has("inverted"),collapse:y.has("collapse"),elevate:y.has("elevate"),fadeImage:y.has("fade-image")}}),l=m(()=>{const y=a.value;return y.hide||y.fullyHide||y.inverted||y.collapse||y.elevate||y.fadeImage||!t.value}),{currentScroll:v,scrollThreshold:S,isScrollingUp:u,scrollRatio:s}=mt(e,{canScroll:l}),n=m(()=>a.value.hide||a.value.fullyHide),i=m(()=>e.collapse||a.value.collapse&&(a.value.inverted?s.value>0:s.value===0)),c=m(()=>e.flat||a.value.fullyHide&&!t.value||a.value.elevate&&(a.value.inverted?v.value>0:v.value===0)),d=m(()=>a.value.fadeImage?a.value.inverted?1-s.value:s.value:void 0),k=m(()=>{var _,M;if(a.value.hide&&a.value.inverted)return 0;const y=((_=p.value)==null?void 0:_.contentHeight)??0,B=((M=p.value)==null?void 0:M.extensionHeight)??0;return n.value?v.value<S.value||a.value.fullyHide?y+B:y:y+B});z(m(()=>!!e.scrollBehavior),()=>{K(()=>{n.value?a.value.inverted?t.value=v.value>S.value:t.value=u.value||v.value<S.value:t.value=!0})});const{ssrBootStyles:P}=he(),{layoutItemStyles:N}=ee({id:e.name,order:m(()=>parseInt(e.order,10)),position:A(e,"location"),layoutSize:k,elementSize:E(void 0),active:t,absolute:A(e,"absolute")});return Q(()=>{const y=de.filterProps(e);return o(de,Z({ref:p,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...N.value,"--v-toolbar-image-opacity":d.value,height:void 0,...P.value},e.style]},y,{collapse:i.value,flat:c.value}),r)}),{}}}),ht=U({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...Be(),...xe(),...Te(),...te(),...Ce(),...Ve({tag:"footer"}),...ke()},"VFooter"),yt=G()({name:"VFooter",props:ht(),setup(e,g){let{slots:r}=g;const p=L(),{themeClasses:t}=ye(e),{backgroundColorClasses:a,backgroundColorStyles:l}=j(A(e,"color")),{borderClasses:v}=pe(e),{elevationClasses:S}=be(e),{roundedClasses:u}=we(e),s=E(32),{resizeRef:n}=Ne(c=>{c.length&&(s.value=c[0].target.clientHeight)}),i=m(()=>e.height==="auto"?s.value:parseInt(e.height,10));return z(()=>e.app,()=>{const c=ee({id:e.name,order:m(()=>parseInt(e.order,10)),position:m(()=>"bottom"),layoutSize:i,elementSize:m(()=>e.height==="auto"?void 0:i.value),active:m(()=>e.app),absolute:A(e,"absolute")});K(()=>{p.value=c.layoutItemStyles.value})}),Q(()=>o(e.tag,{ref:n,class:["v-footer",t.value,a.value,v.value,S.value,u.value,e.class],style:[l.value,e.app?p.value:{height:Se(e.height)},e.style]},r)),{}}});function pt(e){let{rootEl:g,isSticky:r,layoutItemStyles:p}=e;const t=E(!1),a=E(0),l=m(()=>{const u=typeof t.value=="boolean"?"top":t.value;return[r.value?{top:"auto",bottom:"auto",height:void 0}:void 0,t.value?{[u]:Se(a.value)}:{top:p.value.top}]});$(()=>{H(r,u=>{u?window.addEventListener("scroll",S,{passive:!0}):window.removeEventListener("scroll",S)},{immediate:!0})}),J(()=>{window.removeEventListener("scroll",S)});let v=0;function S(){const u=v>window.scrollY?"up":"down",s=g.value.getBoundingClientRect(),n=parseFloat(p.value.top??0),i=window.scrollY-Math.max(0,a.value-n),c=s.height+Math.max(a.value,n)-window.scrollY-window.innerHeight,d=parseFloat(getComputedStyle(g.value).getPropertyValue("--v-body-scroll-y"))||0;s.height<window.innerHeight-n?(t.value="top",a.value=n):u==="up"&&t.value==="bottom"||u==="down"&&t.value==="top"?(a.value=window.scrollY+s.top-d,t.value=!0):u==="down"&&c<=0?(a.value=0,t.value="bottom"):u==="up"&&i<=0&&(d?t.value!=="top"&&(a.value=-i+d+n,t.value="top"):(a.value=s.top+i,t.value="top")),v=window.scrollY}return{isStuck:t,stickyStyles:l}}const bt=100,wt=20;function me(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function fe(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let g=0;for(let r=e.length-1;r>0;r--){if(e[r].t===e[r-1].t)continue;const p=me(g),t=(e[r].d-e[r-1].d)/(e[r].t-e[r-1].t);g+=(t-p)*Math.abs(t),r===e.length-1&&(g*=.5)}return me(g)*1e3}function St(){const e={};function g(t){Array.from(t.changedTouches).forEach(a=>{(e[a.identifier]??(e[a.identifier]=new _e(wt))).push([t.timeStamp,a])})}function r(t){Array.from(t.changedTouches).forEach(a=>{delete e[a.identifier]})}function p(t){var u;const a=(u=e[t])==null?void 0:u.values().reverse();if(!a)throw new Error(`No samples for touch id ${t}`);const l=a[0],v=[],S=[];for(const s of a){if(l[0]-s[0]>bt)break;v.push({t:s[0],d:s[1].clientX}),S.push({t:s[0],d:s[1].clientY})}return{x:fe(v),y:fe(S),get direction(){const{x:s,y:n}=this,[i,c]=[Math.abs(s),Math.abs(n)];return i>c&&s>=0?"right":i>c&&s<=0?"left":c>i&&n>=0?"down":c>i&&n<=0?"up":kt()}}}return{addMovement:g,endTouch:r,getVelocity:p}}function kt(){throw new Error}function Vt(e){let{el:g,isActive:r,isTemporary:p,width:t,touchless:a,position:l}=e;$(()=>{window.addEventListener("touchstart",y,{passive:!0}),window.addEventListener("touchmove",B,{passive:!1}),window.addEventListener("touchend",_,{passive:!0})}),J(()=>{window.removeEventListener("touchstart",y),window.removeEventListener("touchmove",B),window.removeEventListener("touchend",_)});const v=m(()=>["left","right"].includes(l.value)),{addMovement:S,endTouch:u,getVelocity:s}=St();let n=!1;const i=E(!1),c=E(0),d=E(0);let k;function P(f,h){return(l.value==="left"?f:l.value==="right"?document.documentElement.clientWidth-f:l.value==="top"?f:l.value==="bottom"?document.documentElement.clientHeight-f:D())-(h?t.value:0)}function N(f){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const b=l.value==="left"?(f-d.value)/t.value:l.value==="right"?(document.documentElement.clientWidth-f-d.value)/t.value:l.value==="top"?(f-d.value)/t.value:l.value==="bottom"?(document.documentElement.clientHeight-f-d.value)/t.value:D();return h?Math.max(0,Math.min(1,b)):b}function y(f){if(a.value)return;const h=f.changedTouches[0].clientX,b=f.changedTouches[0].clientY,w=25,T=l.value==="left"?h<w:l.value==="right"?h>document.documentElement.clientWidth-w:l.value==="top"?b<w:l.value==="bottom"?b>document.documentElement.clientHeight-w:D(),C=r.value&&(l.value==="left"?h<t.value:l.value==="right"?h>document.documentElement.clientWidth-t.value:l.value==="top"?b<t.value:l.value==="bottom"?b>document.documentElement.clientHeight-t.value:D());(T||C||r.value&&p.value)&&(k=[h,b],d.value=P(v.value?h:b,r.value),c.value=N(v.value?h:b),n=d.value>-20&&d.value<80,u(f),S(f))}function B(f){const h=f.changedTouches[0].clientX,b=f.changedTouches[0].clientY;if(n){if(!f.cancelable){n=!1;return}const T=Math.abs(h-k[0]),C=Math.abs(b-k[1]);(v.value?T>C&&T>3:C>T&&C>3)?(i.value=!0,n=!1):(v.value?C:T)>3&&(n=!1)}if(!i.value)return;f.preventDefault(),S(f);const w=N(v.value?h:b,!1);c.value=Math.max(0,Math.min(1,w)),w>1?d.value=P(v.value?h:b,!0):w<0&&(d.value=P(v.value?h:b,!1))}function _(f){if(n=!1,!i.value)return;S(f),i.value=!1;const h=s(f.changedTouches[0].identifier),b=Math.abs(h.x),w=Math.abs(h.y);(v.value?b>w&&b>400:w>b&&w>3)?r.value=h.direction===({left:"right",right:"left",top:"down",bottom:"up"}[l.value]||D()):r.value=c.value>.5}const M=m(()=>i.value?{transform:l.value==="left"?`translateX(calc(-100% + ${c.value*t.value}px))`:l.value==="right"?`translateX(calc(100% - ${c.value*t.value}px))`:l.value==="top"?`translateY(calc(-100% + ${c.value*t.value}px))`:l.value==="bottom"?`translateY(calc(100% - ${c.value*t.value}px))`:D(),transition:"none"}:void 0);return z(i,()=>{var b,w;const f=((b=g.value)==null?void 0:b.style.transform)??null,h=((w=g.value)==null?void 0:w.style.transition)??null;K(()=>{var T,C,R,F;(C=g.value)==null||C.style.setProperty("transform",((T=M.value)==null?void 0:T.transform)||"none"),(F=g.value)==null||F.style.setProperty("transition",((R=M.value)==null?void 0:R.transition)||null)}),Ie(()=>{var T,C;(T=g.value)==null||T.style.setProperty("transform",f),(C=g.value)==null||C.style.setProperty("transition",h)})}),{isDragging:i,dragProgress:c,dragStyles:M}}function D(){throw new Error}const Ct=["start","end","left","right","top","bottom"],Tt=U({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>Ct.includes(e)},sticky:Boolean,...Be(),...xe(),...Ze(),...qe({mobile:null}),...Te(),...te(),...Ce(),...Ve({tag:"nav"}),...ke()},"VNavigationDrawer"),xt=G()({name:"VNavigationDrawer",props:Tt(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,g){let{attrs:r,emit:p,slots:t}=g;const{isRtl:a}=Le(),{themeClasses:l}=ye(e),{borderClasses:v}=pe(e),{backgroundColorClasses:S,backgroundColorStyles:u}=j(A(e,"color")),{elevationClasses:s}=be(e),{displayClasses:n,mobile:i}=Re(e),{roundedClasses:c}=we(e),d=De(),k=ge(e,"modelValue",null,x=>!!x),{ssrBootStyles:P}=he(),{scopeId:N}=ze(),y=L(),B=E(!1),{runOpenDelay:_,runCloseDelay:M}=We(e,x=>{B.value=x}),f=m(()=>e.rail&&e.expandOnHover&&B.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),h=m(()=>Ae(e.location,a.value)),b=m(()=>e.persistent),w=m(()=>!e.permanent&&(i.value||e.temporary)),T=m(()=>e.sticky&&!w.value&&h.value!=="bottom");z(()=>e.expandOnHover&&e.rail!=null,()=>{H(B,x=>p("update:rail",!x))}),z(()=>!e.disableResizeWatcher,()=>{H(w,x=>!e.permanent&&Ye(()=>k.value=!x))}),z(()=>!e.disableRouteWatcher&&!!d,()=>{H(d.currentRoute,()=>w.value&&(k.value=!1))}),H(()=>e.permanent,x=>{x&&(k.value=!0)}),e.modelValue==null&&!w.value&&(k.value=e.permanent||!i.value);const{isDragging:C,dragProgress:R}=Vt({el:y,isActive:k,isTemporary:w,width:f,touchless:A(e,"touchless"),position:h}),F=m(()=>{const x=w.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):f.value;return C.value?x*R.value:x}),{layoutItemStyles:ae,layoutItemScrimStyles:Ee}=ee({id:e.name,order:m(()=>parseInt(e.order,10)),position:h,layoutSize:F,elementSize:f,active:m(()=>k.value||C.value),disableTransitions:m(()=>C.value),absolute:m(()=>e.absolute||T.value&&typeof le.value!="string")}),{isStuck:le,stickyStyles:Pe}=pt({rootEl:y,isSticky:T,layoutItemStyles:ae}),ne=j(m(()=>typeof e.scrim=="string"?e.scrim:null)),He=m(()=>({...C.value?{opacity:R.value*.2,transition:"none"}:void 0,...Ee.value}));return Oe({VList:{bgColor:"transparent"}}),Q(()=>{const x=t.image||e.image;return o(Xe,null,[o(e.tag,Z({ref:y,onMouseenter:_,onMouseleave:M,class:["v-navigation-drawer",`v-navigation-drawer--${h.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":B.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":w.value,"v-navigation-drawer--persistent":b.value,"v-navigation-drawer--active":k.value,"v-navigation-drawer--sticky":T.value},l.value,S.value,v.value,n.value,s.value,c.value,e.class],style:[u.value,ae.value,P.value,Pe.value,e.style]},N,r),{default:()=>{var oe,ue,re;return[x&&o("div",{key:"image",class:"v-navigation-drawer__img"},[t.image?o(Ue,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},t.image):o(Fe,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),t.prepend&&o("div",{class:"v-navigation-drawer__prepend"},[(oe=t.prepend)==null?void 0:oe.call(t)]),o("div",{class:"v-navigation-drawer__content"},[(ue=t.default)==null?void 0:ue.call(t)]),t.append&&o("div",{class:"v-navigation-drawer__append"},[(re=t.append)==null?void 0:re.call(t)])]}}),o($e,{name:"fade-transition"},{default:()=>[w.value&&(C.value||k.value)&&!!e.scrim&&o("div",Z({class:["v-navigation-drawer__scrim",ne.backgroundColorClasses.value],style:[He.value,ne.backgroundColorStyles.value],onClick:()=>{b.value||(k.value=!1)}},N),null)]})])}),{isStuck:le}}}),Mt=je({__name:"AdminLayout",setup(e){const g=Je(),r=st(),p=L(!0),t=L(!1),a=L([""]),l=async()=>{t.value=!0,t.value=!1},v=async()=>{r.getCurrent()};return $(()=>{v()}),(S,u)=>{const s=tt("RouterView");return q(),se(ct,{app:""},{default:V(()=>[o(xt,{modelValue:p.value,"onUpdate:modelValue":u[1]||(u[1]=n=>p.value=n),app:"",color:"blue-grey-lighten-5 border-primary",border:1},{append:V(()=>[o(ie,{"three-line":""},{default:V(()=>[o(W,{class:"py-2 border-t"},{append:V(()=>[et((q(),se(ce,{onClick:l,icon:"",density:"compact",variant:"tonal",loading:t.value},{default:V(()=>[o(I,{iconName:"logout-1"})]),_:1},8,["loading"])),[[rt,"Cerrar sesión","top"]])]),_:1})]),_:1})]),default:V(()=>[o(Ge,{elevation:"0",class:"rounded-0",color:"primary",variant:"tonal"},{default:V(()=>[o(Ke,{class:"text-center"},{default:V(()=>u[3]||(u[3]=[Y("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/cb/Logo_UNAP.png/640px-Logo_UNAP.png",alt:"logo",width:"70"},null,-1)])),_:1}),o(Qe,{class:"border-t py-2"},{default:V(()=>{var n,i;return[Y("b",null,X(O(g).authState.user.name),1),u[4]||(u[4]=Y("br",null,null,-1)),Y("small",null,X((i=(n=O(g).authState.user)==null?void 0:n.role)==null?void 0:i.toUpperCase()),1)]}),_:1})]),_:1}),o(ie,{nav:"",density:"compact",opened:a.value,"onUpdate:opened":u[0]||(u[0]=n=>a.value=n),color:"primary"},{default:V(()=>[o(W,{key:"panel",title:"Panel",to:"/",link:"",exact:""},{prepend:V(()=>[o(I,{iconName:"element-4"})]),_:1}),o(W,{key:"enrollment",title:"Matrículas",link:"",exact:""},{prepend:V(()=>[o(I,{iconName:"element-4"})]),_:1}),o(W,{key:"schedule",title:"Horario",to:"/mi-horario",link:"",exact:""},{prepend:V(()=>[o(I,{iconName:"element-4"})]),_:1}),o(W,{key:"module",title:"Módulos",to:"/mis-modulos",link:"",exact:""},{prepend:V(()=>[o(I,{iconName:"element-4"})]),_:1})]),_:1},8,["opened"])]),_:1},8,["modelValue"]),o(gt,{floating:"",elevation:"0",app:""},{append:V(()=>u[5]||(u[5]=[])),default:V(()=>[o(ce,{icon:"",onClick:u[2]||(u[2]=n=>p.value=!p.value),size:"small"},{default:V(()=>[o(I,{iconName:"textalign-justifycenter"})]),_:1}),o(ve)]),_:1}),o(it,null,{default:V(()=>[o(s)]),_:1}),o(yt,{app:""},{default:V(()=>[o(at,{label:""},{default:V(()=>{var n,i,c;return[((n=O(r).current)==null?void 0:n.enrollmentEnabled)==1?(q(),lt("span",{key:0,class:ut(((i=O(r).current)==null?void 0:i.enrollmentEnabled)==1?"text-blue":"")},[o(I,{iconName:"flash-circle-1",size:"x-small",class:"me-2 mt-1"})],2)):nt("",!0),ot(" "+X((c=O(r).current)==null?void 0:c.name),1)]}),_:1}),o(ve),u[6]||(u[6]=Y("small",null," v1.0 ",-1))]),_:1})]),_:1})}}});export{Mt as default};
