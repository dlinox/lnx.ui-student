import{d as y,l as v,E as $,c as b,aQ as A,w as a,a as e,aR as F,V as w,b as R,aS as N,g as p,h as C,o as V,r as _,aA as I,aT as T,ax as D,ay as E,f as B,G as U,aU as G,aa as M,aM as j,F as O}from"./index-CMWRQILe.js";import{h}from"./index-BoZKkaqZ.js";import{V as z,a as H}from"./VSwitch-B9IvAKOz.js";import{a as k,V as x}from"./VRow-DB3tsM5B.js";const S="Report",P=async s=>{try{return(await h().get(`${S}/get-form-item/${s}`)).data.data}catch{return{}}},Q=async s=>{try{return await h().post(`${S}/save-item`,s),!0}catch{return!1}},J=()=>({isActive:!0}),L=y({__name:"Form",props:{id:{}},emits:["success"],setup(s,{emit:n}){const d=n,l=s,c=v(null),r=v(!1),t=v(!1),i=v(Object.assign({},J())),f=async()=>{l.id&&(r.value=!0,i.value=await P(l.id),r.value=!1)},g=async()=>{const{valid:u}=await c.value.validate();u&&(r.value=!0,await Q(i.value),d("success"),t.value=!1,r.value=!1)};return $(()=>t.value,u=>{u&&f()}),(u,o)=>(V(),b(A,{"max-width":"500",modelValue:t.value,"onUpdate:modelValue":o[2]||(o[2]=m=>t.value=m),activator:"parent"},{default:a(()=>[e(z,{ref_key:"formRef",ref:c,onSubmit:F(g,["prevent"])},{default:a(()=>[e(w,{title:u.id?"Editar Registro":"Nuevo Registro"},{default:a(()=>[e(R,{class:"border-t border-b"},{default:a(()=>[e(k,null,{default:a(()=>[e(x,{cols:"12",class:"d-flex justify-end"},{default:a(()=>[e(H,{modelValue:i.value.isActive,"onUpdate:modelValue":o[0]||(o[0]=m=>i.value.isActive=m),inset:"",density:"compact",color:"indigo",label:"Activo"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(N,null,{default:a(()=>[e(p,{type:"button",variant:"tonal",color:"secondary",onClick:o[1]||(o[1]=m=>t.value=!1)},{default:a(()=>o[3]||(o[3]=[C("Cancelar")])),_:1}),e(p,{text:"Guardar",color:"primary",type:"submit",variant:"flat",loading:r.value},null,8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},512)]),_:1},8,["modelValue"]))}}),K="attendances",W=async s=>{try{return(await h().post(`${K}/load-datatable`,s)).data.data}catch{return{}}},X=()=>[{title:"Opciones",value:"actions",fixed:!0,width:"70px",align:"center"},{title:"Estudiante",value:"student"},{title:"Nivel",value:"educationLevel"},{title:"Grado",value:"grade"},{title:"Grupo",value:"group"},{title:"Fecha",value:"date"},{title:"Hora de entrada",value:"timeIn"},{title:"Hora de salida",value:"timeOut"},{title:"Estado",value:"status"}],Y=y({__name:"DataTable",setup(s){return(n,d)=>{const l=_("LnxIcon"),c=_("LnxStatusChip"),r=_("LnxDataTable");return V(),b(w,null,{default:a(()=>[e(r,{headers:I(X)(),loadDataTable:I(W)},{header:a(({request:t,loading:i,initDataTable:f,loadingTable:g,debouncedReload:u,reLoadDataTable:o})=>[e(R,{class:"border-t border-b"},{default:a(()=>[e(k,{class:"d-flex justify-space-between align-center"},{default:a(()=>[e(x,{cols:"12",md:"4"},{default:a(()=>[e(B,{modelValue:t.search,"onUpdate:modelValue":m=>t.search=m,label:"Buscar",clearable:"",onInput:u,"onClick:clear":o},null,8,["modelValue","onUpdate:modelValue","onInput","onClick:clear"])]),_:2},1024),e(x,{cols:"12",md:"4",class:"text-end"},{default:a(()=>[e(p,{class:"me-2",disabled:i},{default:a(()=>[d[0]||(d[0]=C(" Nuevo ")),e(L,{id:null,onSuccess:f},null,8,["onSuccess"])]),_:2},1032,["disabled"]),U((V(),b(p,{icon:"",variant:"tonal",density:"comfortable",onClick:f,loading:g},{default:a(()=>[e(l,{iconName:"refresh"})]),_:2},1032,["onClick","loading"])),[[G,"Recargar registros"]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),"item.actions":a(({item:t,loadDataTable:i})=>[e(p,{icon:"",size:"small",variant:"text"},{default:a(()=>[e(l,{iconName:"setting-5"}),e(T,{activator:"parent"},{default:a(()=>[e(D,{nav:""},{default:a(()=>[e(E,{title:"Editar",density:"compact",value:"edit"},{prepend:a(()=>[e(l,{iconName:"message-edit"})]),default:a(()=>[e(L,{id:t.id,onSuccess:i},null,8,["id","onSuccess"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),"item.isActive":a(({item:t})=>[e(c,{value:t.isActive},null,8,["value"])]),_:1},8,["headers","loadDataTable"])]),_:1})}}}),te=y({__name:"ReportView",setup(s){const n=async()=>{};return M(()=>{n()}),(d,l)=>{const c=_("LnxIcon");return V(),j(O,null,[e(w,{title:"Reports",subtitle:"Reportes de asistencia",class:"elevation-1"},{append:a(()=>[e(p,{variant:"text",onClick:l[0]||(l[0]=r=>d.$router.go(-1))},{prepend:a(()=>[e(c,{iconName:"arrow-left-3",size:"large"})]),default:a(()=>[l[1]||(l[1]=C(" Atr√°s "))]),_:1})]),_:1}),e(Y)],64)}}});export{te as default};
