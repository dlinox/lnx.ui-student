import{a as z,V as Y,b as j,c as J,e as P,f as X,g as Z}from"./VItem-DQ8mqnPu.js";import{u as K}from"./period.stores-BOuJyyan.js";import{d as N,b as C,I as Q,c as m,aY as q,w as e,a,k as ee,V as w,aU as R,i as o,aS as E,F as A,aT as M,b0 as ae,e as h,f as s,aC as r,aX as U,aW as le,h as _,o as u,r as k,aD as y,aF as $,a_ as O,aZ as D,J as S,g as te,aI as T,ae as oe}from"./index-DgkKF6Ex.js";import{V as re}from"./VForm-Wfrmmks5.js";import{b as ne,V as H,a as F}from"./VRow-BtM20XH7.js";const se=()=>[{title:"Opciones",value:"actions",fixed:!0,width:"70px",align:"center"},{title:"Modulo",value:"module"},{title:"Curso",value:"course",minWidth:"280px"},{title:"Grupo",value:"group",minWidth:"250px"},{title:"Docente",value:"teacher"},{title:"Estado",value:"enrollmentStatus"}],ue=N({__name:"ChangeEnrollmentGroup",props:{group:{}},emits:["success"],setup(L,{emit:g}){const x=g,n=L,V=C(null),p=C({groupId:null}),f=C(!1),t=C(!1),d=C([]),b=async()=>{p.value.groupId&&(t.value=!0,await P({groupId:p.value.groupId,id:n.group.id}),x("success"),f.value=!1,t.value=!1)},v=async()=>{p.value={groupId:null},d.value=await J({groupId:n.group.groupId})};return Q(()=>f.value,c=>{c&&v()}),(c,l)=>(u(),m(q,{"max-width":"600",modelValue:f.value,"onUpdate:modelValue":l[1]||(l[1]=i=>f.value=i),activator:"parent"},{default:e(()=>[a(re,{ref_key:"formRef",ref:V,onSubmit:ee(b,["prevent"])},{default:e(()=>[a(w,{title:"Cambiar grupo",subtitle:"Selecciona un grupo"},{default:e(()=>[a(z,{mandatory:"",class:"border-t"},{default:e(()=>[a(ne,{style:{height:"auto","max-height":"280px","overflow-y":"auto"}},{default:e(()=>[d.value.length===0?(u(),m(Y,{key:0,type:"warning",variant:"outlined"},{default:e(()=>l[2]||(l[2]=[o(" No otros grupos habilitados para este curso. ")])),_:1})):R("",!0),a(H,{dense:""},{default:e(()=>[(u(!0),E(A,null,M(d.value,(i,W)=>(u(),m(F,{key:W,cols:"12"},{default:e(()=>[a(j,null,{default:e(({isSelected:B,toggle:G})=>[a(w,{color:B?"primary":"",variant:B?"tonal":"plain",onClick:I=>{G&&G(),p.value.groupId=i.id},class:"border"},{default:e(()=>[a(ae,null,{default:e(()=>[a(h,null,{default:e(()=>[o(r(i.group)+" - ",1),s("strong",null," S/. "+r(i.price),1),l[6]||(l[6]=s("br",null,null,-1)),a(U,{class:"rounded-0",density:"compact",color:"info",rounded:"sm"},{default:e(()=>[o(r(i.modality),1)]),_:2},1024),l[7]||(l[7]=s("br",null,null,-1)),s("small",null,[l[3]||(l[3]=o(" Docente: ")),s("strong",null,r(i.teacher),1)]),l[8]||(l[8]=s("br",null,null,-1)),s("small",null,[l[4]||(l[4]=o(" Laboratorio: ")),s("strong",null,r(i.laboratory),1)]),l[9]||(l[9]=s("br",null,null,-1)),s("small",null,[l[5]||(l[5]=o(" Horarios: ")),(u(!0),E(A,null,M(i.schedules,I=>(u(),m(U,{rounded:"sm",class:"rounded-0 me-1",density:"compact",color:"primary"},{default:e(()=>[o(r(I.day)+" "+r(I.startHour)+" - "+r(I.endHour),1)]),_:2},1024))),256))])]),_:2},1024)]),_:2},1024)]),_:2},1032,["color","variant","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),a(le,null,{default:e(()=>[a(_,{type:"button",variant:"tonal",color:"secondary",onClick:l[0]||(l[0]=i=>f.value=!1)},{default:e(()=>l[10]||(l[10]=[o(" Cancelar ")])),_:1}),a(_,{text:"Cambiar grupo",color:"primary",type:"submit",variant:"flat",value:"submit",loading:t.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},512)]),_:1},8,["modelValue"]))}}),ie={class:"d-flex flex-column"},de={class:"text-primary font-weight-bold"},me=N({__name:"DataTable",setup(L){const g=K();return(x,n)=>{const V=k("LnxIcon"),p=k("LnxDialogConfirm"),f=k("LnxDataTable");return u(),m(w,null,{default:e(()=>[a(f,{headers:y(se)(),loadDataTable:y(X)},{header:e(({request:t,initDataTable:d,loadingTable:b,debouncedReload:v,reLoadDataTable:c})=>[a(h,{class:"border-t border-b"},{default:e(()=>[a(H,{class:"d-flex justify-space-between align-center"},{default:e(()=>[a(F,{cols:"12",md:"4"},{default:e(()=>[a(te,{modelValue:t.search,"onUpdate:modelValue":l=>t.search=l,label:"Buscar",clearable:"",onInput:v,"onClick:clear":c},null,8,["modelValue","onUpdate:modelValue","onInput","onClick:clear"])]),_:2},1024),a(F,{cols:"12",md:"4",class:"text-end"},{default:e(()=>[S((u(),m(_,{icon:"",variant:"tonal",density:"comfortable",onClick:d,loading:b},{default:e(()=>[a(V,{iconName:"refresh"})]),_:2},1032,["onClick","loading"])),[[T,"Recargar registros"]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),"item.actions":e(({item:t,loadDataTable:d})=>{var b,v,c,l;return[s("div",ie,[t.period==((v=(b=y(g))==null?void 0:b.enrolled)==null?void 0:v.name)&&t.enrollmentStatus=="MATRICULADO"?S((u(),m(_,{key:0,variant:"flat",density:"comfortable"},{default:e(()=>[n[0]||(n[0]=o(" Cambiar grupo ")),a(ue,{onSuccess:d,group:t},null,8,["onSuccess","group"])]),_:2},1024)),[[T,"Cambiar de grupo"]]):R("",!0),t.period==((l=(c=y(g))==null?void 0:c.enrolled)==null?void 0:l.name)&&t.enrollmentStatus=="MATRICULADO"?S((u(),m(_,{key:1,color:"indigo-darken-2",variant:"flat",density:"comfortable"},{default:e(()=>[a(p,{title:"Reservar matrícula",message:"¿Estás seguro de reservar la matrícula?, no podrás deshacer esta acción.",onOnConfirm:()=>{y(Z)({id:t.id}),d()}},null,8,["onOnConfirm"]),n[1]||(n[1]=o(" Reservar "))]),_:2},1024)),[[T,"Reservar matrícula"]]):R("",!0)])]}),"item.course":e(({item:t})=>[a($,null,{default:e(()=>[a(O,{class:"text-subtitle-2 font-weight-bold"},{default:e(()=>[o(r(t.course),1)]),_:2},1024),a(D,null,{default:e(()=>[o(r(t.area),1)]),_:2},1024)]),_:2},1024)]),"item.group":e(({item:t})=>[a($,null,{default:e(()=>[a(O,{class:"text-subtitle-2"},{default:e(()=>[o(r(t.period)+" - ",1),s("span",de,r(t.group),1)]),_:2},1024),a(D,null,{default:e(()=>[o(r(t.laboratory),1)]),_:2},1024),a(D,null,{default:e(()=>[o(r(t.modality),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["headers","loadDataTable"])]),_:1})}}}),ve=N({__name:"EnrollmentView",setup(L){const g=async()=>{};return oe(()=>{g()}),(x,n)=>{const V=k("LnxIcon");return u(),E(A,null,[a(w,{title:"Mis matriculas",subtitle:"Lista de matriculas realizadas",class:"rounded-0"},{append:e(()=>[a(_,{variant:"text",onClick:n[0]||(n[0]=p=>x.$router.go(-1))},{prepend:e(()=>[a(V,{iconName:"arrow-left-3",size:"large"})]),default:e(()=>[n[1]||(n[1]=o(" Atrás "))]),_:1})]),_:1}),a(me)],64)}}});export{ve as default};
