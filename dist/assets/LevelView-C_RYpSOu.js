import{d as I,l as x,E as k,c as A,aQ as D,w as a,a as e,aR as F,V as N,b as R,a8 as O,aA as d,f as g,e as G,aS as M,g as _,h as S,o as C,r as b,aT as B,ax as j,ay as E,G as H,aU as P,aa as z,aM as h,F as Q}from"./index-CMWRQILe.js";import{h as L}from"./index-BoZKkaqZ.js";import{r as p}from"./rules.utils-DaB-ACZt.js";import{V as q,a as J}from"./VSwitch-B9IvAKOz.js";import{a as $,V as i}from"./VRow-DB3tsM5B.js";const w="levels",K=async s=>{try{return(await L().post(`${w}/load-datatable`,s)).data.data}catch{return{}}},W=async s=>{try{return(await L().get(`${w}/get-form-item/${s}`)).data.data}catch{return{}}},X=async s=>{try{return await L().post(`${w}/save-item`,s),!0}catch{return!1}},Y=async s=>{try{return await L().delete(`${w}/delete-item/${s}`),!0}catch{return!1}},Z=()=>({educationLevel:null,grade:null,order:null,group:null,startTime:null,endTime:null,isActive:!0}),ee={educationLevel:[p],grade:[p],order:[p],group:[p],startTime:[p],endTime:[p],isActive:[p]},ae=["INICIAL","PRIMARIA","SECUNDARIA","ACADEMIA"],U=I({__name:"Form",props:{id:{}},emits:["success"],setup(s,{emit:u}){const f=u,r=s,V=x(null),m=x(!1),c=x(!1),n=ee,t=x(Object.assign({},Z())),y=async()=>{r.id&&(m.value=!0,t.value=await W(r.id),m.value=!1)},T=async()=>{const{valid:v}=await V.value.validate();v&&(m.value=!0,await X(t.value),f("success"),c.value=!1,m.value=!1)};return k(()=>c.value,v=>{v&&y()}),(v,l)=>(C(),A(D,{"max-width":"500",modelValue:c.value,"onUpdate:modelValue":l[8]||(l[8]=o=>c.value=o),activator:"parent"},{default:a(()=>[e(q,{ref_key:"formRef",ref:V,onSubmit:F(T,["prevent"])},{default:a(()=>[e(N,{title:v.id?"Editar Registro":"Nuevo Registro"},{default:a(()=>[e(R,{class:"border-t border-b"},{default:a(()=>[e($,null,{default:a(()=>[e(i,{cols:"12"},{default:a(()=>[e(O,{modelValue:t.value.educationLevel,"onUpdate:modelValue":l[0]||(l[0]=o=>t.value.educationLevel=o),items:d(ae),label:"Nivel",rules:d(n).educationLevel},null,8,["modelValue","items","rules"])]),_:1}),e(i,{cols:"6"},{default:a(()=>[e(g,{modelValue:t.value.grade,"onUpdate:modelValue":l[1]||(l[1]=o=>t.value.grade=o),label:"Grado",rules:d(n).grade},null,8,["modelValue","rules"])]),_:1}),e(i,{cols:"6"},{default:a(()=>[e(g,{modelValue:t.value.group,"onUpdate:modelValue":l[2]||(l[2]=o=>t.value.group=o),label:"Grupo",rules:d(n).group},null,8,["modelValue","rules"])]),_:1}),e(i,{cols:"6"},{default:a(()=>[e(g,{modelValue:t.value.startTime,"onUpdate:modelValue":l[3]||(l[3]=o=>t.value.startTime=o),label:"Hora de inicio",type:"time",rules:d(n).startTime},null,8,["modelValue","rules"])]),_:1}),e(i,{cols:"6"},{default:a(()=>[e(g,{modelValue:t.value.endTime,"onUpdate:modelValue":l[4]||(l[4]=o=>t.value.endTime=o),label:"Hora de fin",type:"time",rules:d(n).endTime},null,8,["modelValue","rules"])]),_:1}),e(i,{cols:"6"},{default:a(()=>l[9]||(l[9]=[G("small",null," El orden es importante pasar de grado o ascender de nivel. ",-1)])),_:1}),e(i,{cols:"6"},{default:a(()=>[e(g,{modelValue:t.value.order,"onUpdate:modelValue":l[5]||(l[5]=o=>t.value.order=o),modelModifiers:{number:!0},label:"Orden",type:"number",rules:d(n).order},null,8,["modelValue","rules"])]),_:1}),e(i,{cols:"12",class:"d-flex justify-end"},{default:a(()=>[e(J,{modelValue:t.value.isActive,"onUpdate:modelValue":l[6]||(l[6]=o=>t.value.isActive=o),inset:"",density:"compact",color:"indigo",label:"Activo"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(M,null,{default:a(()=>[e(_,{type:"button",variant:"tonal",color:"secondary",onClick:l[7]||(l[7]=o=>c.value=!1)},{default:a(()=>l[10]||(l[10]=[S("Cancelar")])),_:1}),e(_,{text:"Guardar",color:"primary",type:"submit",variant:"flat",loading:m.value},null,8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},512)]),_:1},8,["modelValue"]))}}),le=()=>[{title:"Opciones",value:"actions",fixed:!0,width:"70px",align:"center"},{title:"Nivel de educación",value:"educationLevel"},{title:"Orden",value:"order"},{title:"Grado",value:"grade"},{title:"Grupo",value:"group"},{title:"Tolerancia",value:"toleranceTime"},{title:"Horario",value:"schedule"},{title:"Activo",value:"isActive"}],te=I({__name:"DataTable",setup(s){return(u,f)=>{const r=b("LnxIcon"),V=b("LnxDialogConfirm"),m=b("LnxStatusChip"),c=b("LnxDataTable");return C(),A(N,null,{default:a(()=>[e(c,{headers:d(le)(),loadDataTable:d(K)},{header:a(({request:n,loading:t,initDataTable:y,loadingTable:T,debouncedReload:v,reLoadDataTable:l})=>[e(R,{class:"border-t border-b"},{default:a(()=>[e($,{class:"d-flex justify-space-between align-center"},{default:a(()=>[e(i,{cols:"12",md:"4"},{default:a(()=>[e(g,{modelValue:n.search,"onUpdate:modelValue":o=>n.search=o,label:"Buscar",clearable:"",onInput:v,"onClick:clear":l},null,8,["modelValue","onUpdate:modelValue","onInput","onClick:clear"])]),_:2},1024),e(i,{cols:"12",md:"4",class:"text-end"},{default:a(()=>[e(_,{class:"me-2",disabled:t},{default:a(()=>[f[0]||(f[0]=S(" Nuevo ")),e(U,{id:null,onSuccess:y},null,8,["onSuccess"])]),_:2},1032,["disabled"]),H((C(),A(_,{icon:"",variant:"tonal",density:"comfortable",onClick:y,loading:T},{default:a(()=>[e(r,{iconName:"refresh"})]),_:2},1032,["onClick","loading"])),[[P,"Recargar registros"]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),"item.actions":a(({item:n,loadDataTable:t})=>[e(_,{icon:"",size:"small",variant:"text"},{default:a(()=>[e(r,{iconName:"setting-5"}),e(B,{activator:"parent"},{default:a(()=>[e(j,{nav:""},{default:a(()=>[e(E,{title:"Editar",density:"compact",value:"edit"},{prepend:a(()=>[e(r,{iconName:"message-edit"})]),default:a(()=>[e(U,{id:n.id,onSuccess:t},null,8,["id","onSuccess"])]),_:2},1024),e(E,{title:"Eliminar",class:"text-red",density:"compact",value:"delete"},{prepend:a(()=>[e(r,{iconName:"trash"})]),default:a(()=>[e(V,{title:"Eliminar registro",message:"¿Está seguro de eliminar este registro?",onOnConfirm:async()=>{await d(Y)(n.id),t()}},null,8,["onOnConfirm"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),"item.isActive":a(({item:n})=>[e(m,{value:n.isActive},null,8,["value"])]),_:1},8,["headers","loadDataTable"])]),_:1})}}}),ie=I({__name:"LevelView",setup(s){const u=async()=>{};return z(()=>{u()}),(f,r)=>{const V=b("LnxIcon");return C(),h(Q,null,[e(N,{title:"Levels",subtitle:"Gestión de levels",class:"rounded-0"},{append:a(()=>[e(_,{variant:"text",onClick:r[0]||(r[0]=m=>f.$router.go(-1))},{prepend:a(()=>[e(V,{iconName:"arrow-left-3",size:"large"})]),default:a(()=>[r[1]||(r[1]=S(" Atrás "))]),_:1})]),_:1}),e(te)],64)}}});export{ie as default};
