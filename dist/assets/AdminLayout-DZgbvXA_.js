import{q as F,b as _,H as x,s as m,ae as Me,I as H,af as U,ag as j,p as J,Q as ge,ah as D,ai as G,S as he,a2 as z,t as K,a as c,v as q,C as ye,a1 as Z,aj as be,ak as we,al as pe,am as Ie,Z as Se,L as Ve,M as ke,an as Ce,ao as Te,N as Be,ap as Ee,aq as Ne,ar as _e,D as Le,as as Re,at as De,a3 as ze,au as Ae,Y as Ye,a4 as Oe,av as We,aw as Fe,ax as Ue,ay as $e,F as Xe,az as qe,aA as Ze,d as je,aB as Je,c as re,w as T,V as Ge,e as Ke,f as A,aC as Qe,aD as $,aE as Y,aF as se,aG as ie,j as W,J as et,h as ce,a9 as ve,r as tt,aH as at,aI as lt,aJ as nt,i as ot,aK as ut,o as X,aL as rt}from"./index-BxbLVDA6.js";import{u as st}from"./period.stores-BuFaj6nN.js";import{u as Q,m as ee,V as it,a as ct}from"./VMain-3y4fv9Md.js";import{V as de,m as vt}from"./VToolbar-BwFU87ra.js";const dt=F({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function mt(e){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:u}=g;let b=0,t=0;const a=_(null),l=x(0),v=x(0),S=x(0),o=x(!1),r=x(!1),n=m(()=>Number(e.scrollThreshold)),s=m(()=>Me((n.value-l.value)/n.value||0)),i=()=>{const d=a.value;if(!d||u&&!u.value)return;b=l.value,l.value="window"in d?d.pageYOffset:d.scrollTop;const V=d instanceof Window?document.documentElement.scrollHeight:d.scrollHeight;if(t!==V){t=V;return}r.value=l.value<b,S.value=Math.abs(l.value-n.value)};return H(r,()=>{v.value=v.value||l.value}),H(o,()=>{v.value=0}),U(()=>{H(()=>e.scrollTarget,d=>{var P;const V=d?document.querySelector(d):window;V&&V!==a.value&&((P=a.value)==null||P.removeEventListener("scroll",i),a.value=V,a.value.addEventListener("scroll",i,{passive:!0}))},{immediate:!0})}),j(()=>{var d;(d=a.value)==null||d.removeEventListener("scroll",i)}),u&&H(u,i,{immediate:!0}),{scrollThreshold:n,currentScroll:l,currentThreshold:S,isScrollActive:o,scrollRatio:s,isScrollingUp:r,savedScroll:v}}const ft=F({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...vt(),...ee(),...dt(),height:{type:[Number,String],default:64}},"VAppBar"),gt=J()({name:"VAppBar",props:ft(),emits:{"update:modelValue":e=>!0},setup(e,g){let{slots:u}=g;const b=_(),t=ge(e,"modelValue"),a=m(()=>{var E;const y=new Set(((E=e.scrollBehavior)==null?void 0:E.split(" "))??[]);return{hide:y.has("hide"),fullyHide:y.has("fully-hide"),inverted:y.has("inverted"),collapse:y.has("collapse"),elevate:y.has("elevate"),fadeImage:y.has("fade-image")}}),l=m(()=>{const y=a.value;return y.hide||y.fullyHide||y.inverted||y.collapse||y.elevate||y.fadeImage||!t.value}),{currentScroll:v,scrollThreshold:S,isScrollingUp:o,scrollRatio:r}=mt(e,{canScroll:l}),n=m(()=>a.value.hide||a.value.fullyHide),s=m(()=>e.collapse||a.value.collapse&&(a.value.inverted?r.value>0:r.value===0)),i=m(()=>e.flat||a.value.fullyHide&&!t.value||a.value.elevate&&(a.value.inverted?v.value>0:v.value===0)),d=m(()=>a.value.fadeImage?a.value.inverted?1-r.value:r.value:void 0),V=m(()=>{var N,M;if(a.value.hide&&a.value.inverted)return 0;const y=((N=b.value)==null?void 0:N.contentHeight)??0,E=((M=b.value)==null?void 0:M.extensionHeight)??0;return n.value?v.value<S.value||a.value.fullyHide?y+E:y:y+E});D(m(()=>!!e.scrollBehavior),()=>{G(()=>{n.value?a.value.inverted?t.value=v.value>S.value:t.value=o.value||v.value<S.value:t.value=!0})});const{ssrBootStyles:P}=he(),{layoutItemStyles:I}=Q({id:e.name,order:m(()=>parseInt(e.order,10)),position:z(e,"location"),layoutSize:V,elementSize:x(void 0),active:t,absolute:z(e,"absolute")});return K(()=>{const y=de.filterProps(e);return c(de,q({ref:b,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...I.value,"--v-toolbar-image-opacity":d.value,height:void 0,...P.value},e.style]},y,{collapse:s.value,flat:i.value}),u)}),{}}}),ht=F({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...Ee(),...Be(),...Te(),...ee(),...Ce(),...ke({tag:"footer"}),...Ve()},"VFooter"),yt=J()({name:"VFooter",props:ht(),setup(e,g){let{slots:u}=g;const b=_(),{themeClasses:t}=ye(e),{backgroundColorClasses:a,backgroundColorStyles:l}=Z(z(e,"color")),{borderClasses:v}=be(e),{elevationClasses:S}=we(e),{roundedClasses:o}=pe(e),r=x(32),{resizeRef:n}=Ie(i=>{i.length&&(r.value=i[0].target.clientHeight)}),s=m(()=>e.height==="auto"?r.value:parseInt(e.height,10));return D(()=>e.app,()=>{const i=Q({id:e.name,order:m(()=>parseInt(e.order,10)),position:m(()=>"bottom"),layoutSize:s,elementSize:m(()=>e.height==="auto"?void 0:s.value),active:m(()=>e.app),absolute:z(e,"absolute")});G(()=>{b.value=i.layoutItemStyles.value})}),K(()=>c(e.tag,{ref:n,class:["v-footer",t.value,a.value,v.value,S.value,o.value,e.class],style:[l.value,e.app?b.value:{height:Se(e.height)},e.style]},u)),{}}});function bt(e){let{rootEl:g,isSticky:u,layoutItemStyles:b}=e;const t=x(!1),a=x(0),l=m(()=>{const o=typeof t.value=="boolean"?"top":t.value;return[u.value?{top:"auto",bottom:"auto",height:void 0}:void 0,t.value?{[o]:Se(a.value)}:{top:b.value.top}]});U(()=>{H(u,o=>{o?window.addEventListener("scroll",S,{passive:!0}):window.removeEventListener("scroll",S)},{immediate:!0})}),j(()=>{window.removeEventListener("scroll",S)});let v=0;function S(){const o=v>window.scrollY?"up":"down",r=g.value.getBoundingClientRect(),n=parseFloat(b.value.top??0),s=window.scrollY-Math.max(0,a.value-n),i=r.height+Math.max(a.value,n)-window.scrollY-window.innerHeight,d=parseFloat(getComputedStyle(g.value).getPropertyValue("--v-body-scroll-y"))||0;r.height<window.innerHeight-n?(t.value="top",a.value=n):o==="up"&&t.value==="bottom"||o==="down"&&t.value==="top"?(a.value=window.scrollY+r.top-d,t.value=!0):o==="down"&&i<=0?(a.value=0,t.value="bottom"):o==="up"&&s<=0&&(d?t.value!=="top"&&(a.value=-s+d+n,t.value="top"):(a.value=r.top+s,t.value="top")),v=window.scrollY}return{isStuck:t,stickyStyles:l}}const wt=100,pt=20;function me(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function fe(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let g=0;for(let u=e.length-1;u>0;u--){if(e[u].t===e[u-1].t)continue;const b=me(g),t=(e[u].d-e[u-1].d)/(e[u].t-e[u-1].t);g+=(t-b)*Math.abs(t),u===e.length-1&&(g*=.5)}return me(g)*1e3}function St(){const e={};function g(t){Array.from(t.changedTouches).forEach(a=>{(e[a.identifier]??(e[a.identifier]=new Ne(pt))).push([t.timeStamp,a])})}function u(t){Array.from(t.changedTouches).forEach(a=>{delete e[a.identifier]})}function b(t){var o;const a=(o=e[t])==null?void 0:o.values().reverse();if(!a)throw new Error(`No samples for touch id ${t}`);const l=a[0],v=[],S=[];for(const r of a){if(l[0]-r[0]>wt)break;v.push({t:r[0],d:r[1].clientX}),S.push({t:r[0],d:r[1].clientY})}return{x:fe(v),y:fe(S),get direction(){const{x:r,y:n}=this,[s,i]=[Math.abs(r),Math.abs(n)];return s>i&&r>=0?"right":s>i&&r<=0?"left":i>s&&n>=0?"down":i>s&&n<=0?"up":Vt()}}}return{addMovement:g,endTouch:u,getVelocity:b}}function Vt(){throw new Error}function kt(e){let{el:g,isActive:u,isTemporary:b,width:t,touchless:a,position:l}=e;U(()=>{window.addEventListener("touchstart",y,{passive:!0}),window.addEventListener("touchmove",E,{passive:!1}),window.addEventListener("touchend",N,{passive:!0})}),j(()=>{window.removeEventListener("touchstart",y),window.removeEventListener("touchmove",E),window.removeEventListener("touchend",N)});const v=m(()=>["left","right"].includes(l.value)),{addMovement:S,endTouch:o,getVelocity:r}=St();let n=!1;const s=x(!1),i=x(0),d=x(0);let V;function P(f,h){return(l.value==="left"?f:l.value==="right"?document.documentElement.clientWidth-f:l.value==="top"?f:l.value==="bottom"?document.documentElement.clientHeight-f:R())-(h?t.value:0)}function I(f){let h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const w=l.value==="left"?(f-d.value)/t.value:l.value==="right"?(document.documentElement.clientWidth-f-d.value)/t.value:l.value==="top"?(f-d.value)/t.value:l.value==="bottom"?(document.documentElement.clientHeight-f-d.value)/t.value:R();return h?Math.max(0,Math.min(1,w)):w}function y(f){if(a.value)return;const h=f.changedTouches[0].clientX,w=f.changedTouches[0].clientY,p=25,C=l.value==="left"?h<p:l.value==="right"?h>document.documentElement.clientWidth-p:l.value==="top"?w<p:l.value==="bottom"?w>document.documentElement.clientHeight-p:R(),k=u.value&&(l.value==="left"?h<t.value:l.value==="right"?h>document.documentElement.clientWidth-t.value:l.value==="top"?w<t.value:l.value==="bottom"?w>document.documentElement.clientHeight-t.value:R());(C||k||u.value&&b.value)&&(V=[h,w],d.value=P(v.value?h:w,u.value),i.value=I(v.value?h:w),n=d.value>-20&&d.value<80,o(f),S(f))}function E(f){const h=f.changedTouches[0].clientX,w=f.changedTouches[0].clientY;if(n){if(!f.cancelable){n=!1;return}const C=Math.abs(h-V[0]),k=Math.abs(w-V[1]);(v.value?C>k&&C>3:k>C&&k>3)?(s.value=!0,n=!1):(v.value?k:C)>3&&(n=!1)}if(!s.value)return;f.preventDefault(),S(f);const p=I(v.value?h:w,!1);i.value=Math.max(0,Math.min(1,p)),p>1?d.value=P(v.value?h:w,!0):p<0&&(d.value=P(v.value?h:w,!1))}function N(f){if(n=!1,!s.value)return;S(f),s.value=!1;const h=r(f.changedTouches[0].identifier),w=Math.abs(h.x),p=Math.abs(h.y);(v.value?w>p&&w>400:p>w&&p>3)?u.value=h.direction===({left:"right",right:"left",top:"down",bottom:"up"}[l.value]||R()):u.value=i.value>.5}const M=m(()=>s.value?{transform:l.value==="left"?`translateX(calc(-100% + ${i.value*t.value}px))`:l.value==="right"?`translateX(calc(100% - ${i.value*t.value}px))`:l.value==="top"?`translateY(calc(-100% + ${i.value*t.value}px))`:l.value==="bottom"?`translateY(calc(100% - ${i.value*t.value}px))`:R(),transition:"none"}:void 0);return D(s,()=>{var w,p;const f=((w=g.value)==null?void 0:w.style.transform)??null,h=((p=g.value)==null?void 0:p.style.transition)??null;G(()=>{var C,k,L,O;(k=g.value)==null||k.style.setProperty("transform",((C=M.value)==null?void 0:C.transform)||"none"),(O=g.value)==null||O.style.setProperty("transition",((L=M.value)==null?void 0:L.transition)||null)}),_e(()=>{var C,k;(C=g.value)==null||C.style.setProperty("transform",f),(k=g.value)==null||k.style.setProperty("transition",h)})}),{isDragging:s,dragProgress:i,dragStyles:M}}function R(){throw new Error}const Ct=["start","end","left","right","top","bottom"],Tt=F({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>Ct.includes(e)},sticky:Boolean,...Ee(),...Be(),...Ze(),...qe({mobile:null}),...Te(),...ee(),...Ce(),...ke({tag:"nav"}),...Ve()},"VNavigationDrawer"),Bt=J()({name:"VNavigationDrawer",props:Tt(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,g){let{attrs:u,emit:b,slots:t}=g;const{isRtl:a}=Le(),{themeClasses:l}=ye(e),{borderClasses:v}=be(e),{backgroundColorClasses:S,backgroundColorStyles:o}=Z(z(e,"color")),{elevationClasses:r}=we(e),{displayClasses:n,mobile:s}=Re(e),{roundedClasses:i}=pe(e),d=De(),V=ge(e,"modelValue",null,B=>!!B),{ssrBootStyles:P}=he(),{scopeId:I}=ze(),y=_(),E=x(!1),{runOpenDelay:N,runCloseDelay:M}=We(e,B=>{E.value=B}),f=m(()=>e.rail&&e.expandOnHover&&E.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),h=m(()=>Ae(e.location,a.value)),w=m(()=>e.persistent),p=m(()=>!e.permanent&&(s.value||e.temporary)),C=m(()=>e.sticky&&!p.value&&h.value!=="bottom");D(()=>e.expandOnHover&&e.rail!=null,()=>{H(E,B=>b("update:rail",!B))}),D(()=>!e.disableResizeWatcher,()=>{H(p,B=>!e.permanent&&Ye(()=>V.value=!B))}),D(()=>!e.disableRouteWatcher&&!!d,()=>{H(d.currentRoute,()=>p.value&&(V.value=!1))}),H(()=>e.permanent,B=>{B&&(V.value=!0)}),e.modelValue==null&&!p.value&&(V.value=e.permanent||!s.value);const{isDragging:k,dragProgress:L}=kt({el:y,isActive:V,isTemporary:p,width:f,touchless:z(e,"touchless"),position:h}),O=m(()=>{const B=p.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):f.value;return k.value?B*L.value:B}),{layoutItemStyles:te,layoutItemScrimStyles:xe}=Q({id:e.name,order:m(()=>parseInt(e.order,10)),position:h,layoutSize:O,elementSize:f,active:m(()=>V.value||k.value),disableTransitions:m(()=>k.value),absolute:m(()=>e.absolute||C.value&&typeof ae.value!="string")}),{isStuck:ae,stickyStyles:Pe}=bt({rootEl:y,isSticky:C,layoutItemStyles:te}),le=Z(m(()=>typeof e.scrim=="string"?e.scrim:null)),He=m(()=>({...k.value?{opacity:L.value*.2,transition:"none"}:void 0,...xe.value}));return Oe({VList:{bgColor:"transparent"}}),K(()=>{const B=t.image||e.image;return c(Xe,null,[c(e.tag,q({ref:y,onMouseenter:N,onMouseleave:M,class:["v-navigation-drawer",`v-navigation-drawer--${h.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":E.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":p.value,"v-navigation-drawer--persistent":w.value,"v-navigation-drawer--active":V.value,"v-navigation-drawer--sticky":C.value},l.value,S.value,v.value,n.value,r.value,i.value,e.class],style:[o.value,te.value,P.value,Pe.value,e.style]},I,u),{default:()=>{var ne,oe,ue;return[B&&c("div",{key:"image",class:"v-navigation-drawer__img"},[t.image?c(Ue,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},t.image):c(Fe,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),t.prepend&&c("div",{class:"v-navigation-drawer__prepend"},[(ne=t.prepend)==null?void 0:ne.call(t)]),c("div",{class:"v-navigation-drawer__content"},[(oe=t.default)==null?void 0:oe.call(t)]),t.append&&c("div",{class:"v-navigation-drawer__append"},[(ue=t.append)==null?void 0:ue.call(t)])]}}),c($e,{name:"fade-transition"},{default:()=>[p.value&&(k.value||V.value)&&!!e.scrim&&c("div",q({class:["v-navigation-drawer__scrim",le.backgroundColorClasses.value],style:[He.value,le.backgroundColorStyles.value],onClick:()=>{w.value||(V.value=!1)}},I),null)]})])}),{isStuck:ae}}}),Mt=je({__name:"AdminLayout",setup(e){const g=Je(),u=st(),b=_(!0),t=_(!1),a=_([""]),l=async()=>{t.value=!0,t.value=!1},v=async()=>{u.getCurrent()};return U(()=>{v()}),(S,o)=>{const r=tt("RouterView");return X(),re(ct,{app:""},{default:T(()=>[c(Bt,{modelValue:b.value,"onUpdate:modelValue":o[1]||(o[1]=n=>b.value=n),app:"",color:"blue-grey-lighten-5 border-primary",border:1},{append:T(()=>[c(se,{"three-line":""},{default:T(()=>[c(ie,{class:"py-2 border-t"},{append:T(()=>[et((X(),re(ce,{onClick:l,icon:"",density:"compact",variant:"tonal",loading:t.value},{default:T(()=>[c(W,{iconName:"logout-1"})]),_:1},8,["loading"])),[[rt,"Cerrar sesiÃ³n","top"]])]),_:1})]),_:1})]),default:T(()=>[c(Ge,{elevation:"0",class:"rounded-0",color:"primary",variant:"tonal"},{default:T(()=>[c(Ke,{class:"text-center"},{default:T(()=>o[3]||(o[3]=[A("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/cb/Logo_UNAP.png/640px-Logo_UNAP.png",alt:"logo",width:"70"},null,-1)])),_:1}),c(Qe,{class:"border-t py-2"},{default:T(()=>{var n,s;return[A("b",null,$(Y(g).authState.user.name),1),o[4]||(o[4]=A("br",null,null,-1)),A("small",null,$((s=(n=Y(g).authState.user)==null?void 0:n.role)==null?void 0:s.toUpperCase()),1)]}),_:1})]),_:1}),c(se,{nav:"",density:"compact",opened:a.value,"onUpdate:opened":o[0]||(o[0]=n=>a.value=n),color:"primary"},{default:T(()=>[c(ie,{key:"panel",title:"Panel",to:"/",link:"",exact:""},{prepend:T(()=>[c(W,{iconName:"element-4"})]),_:1})]),_:1},8,["opened"])]),_:1},8,["modelValue"]),c(gt,{floating:"",elevation:"0",app:""},{append:T(()=>o[5]||(o[5]=[])),default:T(()=>[c(ce,{icon:"",onClick:o[2]||(o[2]=n=>b.value=!b.value),size:"small"},{default:T(()=>[c(W,{iconName:"textalign-justifycenter"})]),_:1}),c(ve)]),_:1}),c(it,null,{default:T(()=>[c(r)]),_:1}),c(yt,{app:""},{default:T(()=>[c(at,{label:""},{default:T(()=>{var n,s,i;return[((n=Y(u).current)==null?void 0:n.enrollmentEnabled)==1?(X(),lt("span",{key:0,class:ut(((s=Y(u).current)==null?void 0:s.enrollmentEnabled)==1?"text-blue":"")},[c(W,{iconName:"flash-circle-1",size:"x-small",class:"me-2 mt-1"})],2)):nt("",!0),ot(" "+$((i=Y(u).current)==null?void 0:i.name),1)]}),_:1}),c(ve),o[6]||(o[6]=A("small",null," v1.0 ",-1))]),_:1})]),_:1})}}});export{Mt as default};
