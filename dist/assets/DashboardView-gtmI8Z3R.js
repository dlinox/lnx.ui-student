import{_ as ce}from"./ModuleList.vue_vue_type_script_setup_true_lang-DetI4vNp.js";import{a6 as me,p as O,y as P,bf as M,n as pe,v as fe,aa as be,bg as ge,bh as ve,bi as _e,bj as he,bk as ye,bl as Pe,bm as Ve,bn as Se,bo as ke,bp as Ie,bq as xe,br as we,C as Ce,a as t,bs as Be,ak as De,bt as Te,bu as Ge,bv as Fe,bw as $e,bx as Ee,by as Le,an as Ae,bz as Me,aQ as Ne,bA as Re,d as j,b as H,ae as Oe,c as S,V as C,w as s,e as f,h as w,t as i,bB as h,F as V,bC as B,a$ as je,i as _,b6 as He,f as D,S as qe,b4 as We,bD as ze,b5 as Qe,Z as Ue,u as T,l as Ze,g as Je,o as c,a_ as Ke,ap as Xe,R as Ye,_ as et}from"./index-m7IQwQKl.js";import{u as tt}from"./heading.store-DLCxOOA2.js";import{_ as at}from"./index-mqzOb2f4.js";import{u as st}from"./period.stores-D0Ztp__r.js";import{V as N,a as y}from"./VRow-BSlsWhpH.js";import{V as R}from"./VContainer-CZhXTh8A.js";import"./index-BIDq055Q.js";const rt="schedules",ot=async()=>{try{return(await me().get(`${rt}/available`)).data.data}catch{return[]}},lt=O({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},returnObject:Boolean},"DataIterator-items");function nt(e,o){const a=e.returnObject?o:M(o,e.itemValue),l=M(o,e.itemSelectable,!0);return{type:"item",value:a,selectable:l,raw:o}}function ut(e,o){const a=[];for(const l of o)a.push(nt(e,l));return a}function it(e){return{items:P(()=>ut(e,e.items))}}const dt=O({search:String,loading:Boolean,...Ae(),...lt(),...Le(),...Ee(),...$e({itemsPerPage:5}),...Fe(),...Ge(),...Te(),...De(),...Be({transition:{component:Me,hideOnLeave:!0}})},"VDataIterator"),ct=pe()({name:"VDataIterator",props:dt(),emits:{"update:modelValue":e=>!0,"update:groupBy":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,o){let{slots:a}=o;const l=fe(e,"groupBy"),b=be(e,"search"),{items:m}=it(e),{filteredItems:u}=ge(e,m,b,{transform:v=>v.raw}),{sortBy:n,multiSort:r,mustSort:p}=ve(e),{page:d,itemsPerPage:g}=_e(e),{toggleSort:k}=he({sortBy:n,multiSort:r,mustSort:p,page:d}),{sortByWithGroups:q,opened:W,extractRows:z,isGroupOpen:Q,toggleGroup:U}=ye({groupBy:l,sortBy:n}),{sortedItems:Z}=Pe(e,u,q,{transform:v=>v.raw}),{flatItems:G}=Ve(Z,l,W),J=P(()=>G.value.length),{startIndex:K,stopIndex:X,pageCount:Y,prevPage:ee,nextPage:te,setItemsPerPage:ae,setPage:se}=Se({page:d,itemsPerPage:g,itemsLength:J}),{paginatedItems:I}=ke({items:G,startIndex:K,stopIndex:X,itemsPerPage:g}),F=P(()=>z(I.value)),{isSelected:re,select:oe,selectAll:le,toggleSelect:ne}=Ie(e,{allItems:m,currentPage:F}),{isExpanded:ue,toggleExpand:ie}=xe(e);we({page:d,itemsPerPage:g,sortBy:n,groupBy:l,search:b});const x=P(()=>({page:d.value,itemsPerPage:g.value,sortBy:n.value,pageCount:Y.value,toggleSort:k,prevPage:ee,nextPage:te,setPage:se,setItemsPerPage:ae,isSelected:re,select:oe,selectAll:le,toggleSelect:ne,isExpanded:ue,toggleExpand:ie,isGroupOpen:Q,toggleGroup:U,items:F.value,groupedItems:I.value}));return Ce(()=>t(e.tag,{class:["v-data-iterator",{"v-data-iterator--loading":e.loading},e.class],style:e.style},{default:()=>{var v,$;return[(v=a.header)==null?void 0:v.call(a,x.value),t(Ne,{transition:e.transition},{default:()=>{var E,L;return[e.loading?t(Re,{key:"loader",name:"v-data-iterator",active:!0},{default:de=>{var A;return(A=a.loader)==null?void 0:A.call(a,de)}}):t("div",{key:"items"},[I.value.length?(L=a.default)==null?void 0:L.call(a,x.value):(E=a["no-data"])==null?void 0:E.call(a)])]}}),($=a.footer)==null?void 0:$.call(a,x.value)]}})),{}}}),mt={class:"d-flex align-center justify-center pa-4 border-t"},pt={class:"mx-2 text-caption"},ft=j({__name:"GroupList",props:{period:{}},setup(e){const o=Ze(),a=H([]),l=Oe("");return(async()=>{try{a.value=await at()}catch(m){console.error("Error fetching enabled groups:",m)}})(),(m,u)=>(c(),S(C,{title:`Grupos ${m.period}`,subtitle:"Grupos habilitados para matrícula"},{default:s(()=>[t(ct,{items:a.value,"items-per-page":3,search:l.value},{header:s(()=>[t(D,null,{default:s(()=>[t(Je,{label:"Buscar grupo",modelValue:l.value,"onUpdate:modelValue":u[0]||(u[0]=n=>l.value=n),placeholder:"Buscar grupo",clearable:"","hide-details":""},null,8,["modelValue"])]),_:1})]),default:s(({items:n})=>[(c(!0),h(V,null,B(n,(r,p)=>(c(),S(C,{class:"border-t rounded-0",elevation:"0",key:p},{default:s(()=>[t(je,{class:"text-subtitle-2 mt-4"},{default:s(()=>[_(i(r.raw.moduleName),1)]),_:2},1024),t(He,{class:"text-subtitle-1"},{default:s(()=>[f("strong",null,i(r.raw.name)+" - ",1),_(" "+i(r.raw.courseName),1)]),_:2},1024),t(D,null,{default:s(()=>[t(qe,{variant:"tonal",class:"rounded-lg"},{append:s(()=>[_(i(r.raw.countStudents)+" / "+i(r.raw.minStudents),1)]),default:s(()=>[t(We,{class:"text-subtitle-2"},{default:s(()=>u[1]||(u[1]=[_(" Matriculados ")])),_:1}),t(ze,{max:r.raw.minStudents,"model-value":r.raw.countStudents,color:"dark",height:"12",rounded:""},null,8,["max","model-value"]),t(Qe,null,{default:s(()=>[f("small",null," Mínimo requerido: "+i(r.raw.minStudents),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),t(Ue,null,{default:s(()=>[t(w,{block:"",density:"comfortable",variant:"tonal",link:"",onClick:d=>T(o).push({name:"Course",params:{id:r.raw.moduleId}})},{default:s(()=>u[2]||(u[2]=[_(" Ver módulo ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),footer:s(({page:n,pageCount:r,prevPage:p,nextPage:d})=>[f("div",mt,[t(w,{disabled:n===1,density:"comfortable",icon:"mdi-chevron-left",variant:"tonal",rounded:"",onClick:p},null,8,["disabled","onClick"]),f("div",pt,i(n)+" / "+i(r),1),t(w,{disabled:n>=r,density:"comfortable",icon:"mdi-chevron-right",variant:"tonal",rounded:"",onClick:d},null,8,["disabled","onClick"])])]),_:1},8,["items","search"])]),_:1},8,["title"]))}}),bt={class:"text-h6"},gt={class:"text-subtitle-1 d-flex align-center text-primary"},It=j({__name:"DashboardView",setup(e){const o=st(),a=tt(),l=Ke(),b=H([]),m=async()=>{var u;o.getEnrolled(),b.value=await ot(),a.setHeading("Inicio",`Bienvenido(a), ${(u=l==null?void 0:l.authState)==null?void 0:u.user.name}`)};return Xe(()=>{m()}),(u,n)=>(c(),h(V,null,[t(R,null,{default:s(()=>[t(N,{class:""},{default:s(()=>[t(y,{cols:"12",md:"7"},{default:s(()=>[t(ce,{title:"Mis módulos",subtitle:"Módulos en los que estás matriculado",onlyEnrolled:!0})]),_:1}),t(y,{cols:"12",md:"5"},{default:s(()=>[t(N,null,{default:s(()=>{var r;return[(r=T(o).enrolled)!=null&&r.period?(c(),S(y,{key:0,cols:"12"},{default:s(()=>[t(ft,{period:T(o).enrolled.period},null,8,["period"])]),_:1})):Ye("",!0),t(y,{cols:"12"},{default:s(()=>[t(C,{title:"Horario",subtitle:"Mis Horarios Semanales",elevation:"0"},{default:s(()=>[(c(!0),h(V,null,B(b.value,(p,d)=>(c(),S(D,{key:d},{default:s(()=>[f("h6",bt,i(p.dayName),1),f("ul",null,[(c(!0),h(V,null,B(p.hours,(g,k)=>(c(),h("li",{key:k},[f("h6",gt,[t(et,{iconName:"clock-1",class:"me-2"}),_(" "+i(g),1)])]))),128))])]),_:2},1024))),128))]),_:1})]),_:1})]}),_:1})]),_:1})]),_:1})]),_:1}),t(R)],64))}});export{It as default};
