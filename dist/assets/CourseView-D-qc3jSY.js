import{n as E,d as q,b as g,I as W,c as S,aZ as Y,w as l,a as e,k as Z,V as A,r as K,e as M,ab as Q,g as P,aX as B,h as w,i as s,o as C,p as h,q as ue,C as ne,G as oe,L as re,M as se,a_ as de,N as me,X as ie,R as pe,f,aI as $,F as D,aV as T,a$ as ce,aD as m,aH as O,af as ve,aW as j,aJ as z,aF as fe,aG as x,b0 as G,b1 as F,b2 as ye}from"./index-CkNYxJqC.js";import{a as Ve}from"./index-s6EqiVj4.js";import{V as ee}from"./VForm-DeHLFw7N.js";import{V as L,a as I,b as le}from"./VRow-DgJu0qrS.js";const k=r=>!!r||"Obligatorio",be="course",ge=async(r,c)=>{try{return(await E().get(`${be}/curriculum/${c}/module/${r}`)).data.data}catch{return[]}},X=()=>({moduleId:null,curriculumId:null,paymentAmount:null,paymentMethod:null,paymentDate:null,paymentSequence:null}),J={moduleId:[k],curriculumId:[k],paymentAmount:[k],paymentMethod:[k],paymentDate:[k],paymentSequence:[k]},U="enrollment",Ie=async r=>{try{return await E().post(`${U}/store-student-enrollment`,r),!0}catch{return!1}},Ce=async r=>{try{return(await E().post(`${U}/enabled-groups-enrollment`,r)).data.data}catch{return[]}},_e=async r=>{try{return await E().post(`${U}/store-group-enrollment`,r),!0}catch{return!1}},Se=q({__name:"Enrollment",props:{studentId:{},module:{}},emits:["success"],setup(r,{emit:c}){const n=c,y=r,i=g(!1),v=g(!1),p=g(J),t=g(Object.assign({},X())),_=async()=>{v.value=!0,await Ie(t.value)&&(n("success"),i.value=!1),v.value=!1},V=async()=>{t.value=Object.assign({},X()),p.value=J,t.value.moduleId=y.module.id,t.value.paymentAmount=y.module.prices,t.value.curriculumId=y.module.curriculumId};return W(()=>i.value,d=>{d&&V()}),(d,u)=>{const a=K("LnxIcon");return C(),S(Y,{"max-width":"600",modelValue:i.value,"onUpdate:modelValue":u[5]||(u[5]=b=>i.value=b),activator:"parent"},{default:l(()=>[e(ee,{ref:"formRef",onSubmit:Z(_,["prevent"])},{default:l(()=>{var b;return[e(A,{title:(b=d.module)==null?void 0:b.name,subtitle:"Registrar pago"},{default:l(()=>[e(A,{color:"info",variant:"tonal",subtitle:"El pago debe ser realizado con un dia de anticipación.",elevation:"0",class:"rounded-0"},{prepend:l(()=>[e(a,{iconName:"info-circle"})]),_:1}),e(M,{class:"border-t border-b"},{default:l(()=>[e(L,null,{default:l(()=>[e(I,{cols:"6"},{default:l(()=>[e(Q,{modelValue:t.value.paymentMethod,"onUpdate:modelValue":u[0]||(u[0]=o=>t.value.paymentMethod=o),items:[{title:"BN - VENTANILLA",value:7},{title:"BN - PAGALO.PE",value:9}],label:"Pago en",rules:p.value.paymentMethod},null,8,["modelValue","rules"])]),_:1}),e(I,{cols:"6"},{default:l(()=>[e(P,{modelValue:t.value.paymentSequence,"onUpdate:modelValue":u[1]||(u[1]=o=>t.value.paymentSequence=o),label:"Numero de operacion",type:"number",rules:p.value.paymentSequence},null,8,["modelValue","rules"])]),_:1}),e(I,{cols:"6"},{default:l(()=>[e(P,{modelValue:t.value.paymentAmount,"onUpdate:modelValue":u[2]||(u[2]=o=>t.value.paymentAmount=o),readonly:"",label:"Monto",type:"number",rules:p.value.paymentAmount},null,8,["modelValue","rules"])]),_:1}),e(I,{cols:"6"},{default:l(()=>[e(P,{modelValue:t.value.paymentDate,"onUpdate:modelValue":u[3]||(u[3]=o=>t.value.paymentDate=o),label:"Fecha",type:"date",rules:p.value.paymentDate},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(B,null,{default:l(()=>[e(w,{type:"button",variant:"tonal",color:"secondary",onClick:u[4]||(u[4]=o=>i.value=!1)},{default:l(()=>u[6]||(u[6]=[s("Cancelar")])),_:1}),e(w,{text:"Matricular",color:"primary",type:"submit",loading:v.value},null,8,["loading"])]),_:1})]),_:1},8,["title"])]}),_:1},512)]),_:1},8,["modelValue"])}}}),te=Symbol.for("vuetify:v-item-group"),Ae=ue({...me(),...de({selectedClass:"v-item--selected"}),...se(),...re()},"VItemGroup"),we=h()({name:"VItemGroup",props:Ae(),emits:{"update:modelValue":r=>!0},setup(r,c){let{slots:n}=c;const{themeClasses:y}=ne(r),{isSelected:i,select:v,next:p,prev:t,selected:_}=oe(r,te);return()=>e(r.tag,{class:["v-item-group",y.value,r.class],style:r.style},{default:()=>{var V;return[(V=n.default)==null?void 0:V.call(n,{isSelected:i,select:v,next:p,prev:t,selected:_.value})]}})}}),ke=h()({name:"VItem",props:ie(),emits:{"group:selected":r=>!0},setup(r,c){let{slots:n}=c;const{isSelected:y,select:i,toggle:v,selectedClass:p,value:t,disabled:_}=pe(r,te);return()=>{var V;return(V=n.default)==null?void 0:V.call(n,{isSelected:y.value,selectedClass:p.value,select:i,toggle:v,value:t.value,disabled:_.value})}}}),Pe=q({__name:"EnrollmentGroup",props:{course:{}},emits:["success"],setup(r,{emit:c}){const n=c,y=r,i=g(!1),v=g(!1),p=g([]),t=g({paymentMethod:null,paymentSequence:null,paymentAmount:null,paymentDate:null,groupId:null}),_=g([]),V=async()=>{v.value=!0,await _e(t.value)&&(n("success"),i.value=!1),v.value=!1,console.log(t.value)},d=async()=>{t.value={paymentMethod:null,paymentSequence:null,paymentAmount:null,paymentDate:null,groupId:null},_.value=await Ce({curriculumCourseId:y.course.curriculumCourseId})};return W(()=>i.value,u=>{u&&d()}),(u,a)=>(C(),S(Y,{"max-width":"600",modelValue:i.value,"onUpdate:modelValue":a[5]||(a[5]=b=>i.value=b),activator:"parent"},{default:l(()=>[e(ee,{ref:"formRef",onSubmit:Z(V,["prevent"])},{default:l(()=>{var b;return[e(A,{title:(b=u.course)==null?void 0:b.name,subtitle:"Registrar pago"},{default:l(()=>[e(we,{mandatory:"",class:"border-t"},{default:l(()=>[e(le,{style:{"max-height":"220px","overflow-y":"auto"}},{default:l(()=>[e(L,{dense:""},{default:l(()=>[(C(!0),$(D,null,T(_.value,(o,ae)=>(C(),S(I,{key:ae,cols:"12"},{default:l(()=>[e(ke,null,{default:l(({isSelected:H,toggle:R})=>[e(A,{color:H?"primary":"",variant:H?"tonal":"plain",onClick:N=>{R&&R(),t.value.groupId=o.id,t.value.paymentAmount=o.price},class:"border"},{default:l(()=>[e(ce,null,{default:l(()=>[e(M,null,{default:l(()=>[s(m(o.group)+" - ",1),f("strong",null," S/. "+m(o.price),1),a[9]||(a[9]=f("br",null,null,-1)),e(O,{class:"rounded-0",density:"compact",color:"info",rounded:"sm"},{default:l(()=>[s(m(o.modality),1)]),_:2},1024),a[10]||(a[10]=f("br",null,null,-1)),f("small",null,[a[6]||(a[6]=s("Docente: ")),f("strong",null,m(o.teacher),1)]),a[11]||(a[11]=f("br",null,null,-1)),f("small",null,[a[7]||(a[7]=s(" Laboratorio: ")),f("strong",null,m(o.laboratory),1)]),a[12]||(a[12]=f("br",null,null,-1)),f("small",null,[a[8]||(a[8]=s(" Horarios: ")),(C(!0),$(D,null,T(o.schedules,N=>(C(),S(O,{rounded:"sm",class:"rounded-0 me-1",density:"compact",color:"primary"},{default:l(()=>[s(m(N.day)+" "+m(N.startHour)+" - "+m(N.endHour),1)]),_:2},1024))),256))])]),_:2},1024)]),_:2},1024)]),_:2},1032,["color","variant","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),e(M,{class:"border-t border-b"},{default:l(()=>[e(L,null,{default:l(()=>[e(I,{cols:"6"},{default:l(()=>[e(Q,{modelValue:t.value.paymentMethod,"onUpdate:modelValue":a[0]||(a[0]=o=>t.value.paymentMethod=o),items:[{title:"BN - VENTANILLA",value:7},{title:"BN - PAGALO.PE",value:9}],label:"Pago en",rules:p.value.paymentMethod},null,8,["modelValue","rules"])]),_:1}),e(I,{cols:"6"},{default:l(()=>[e(P,{modelValue:t.value.paymentSequence,"onUpdate:modelValue":a[1]||(a[1]=o=>t.value.paymentSequence=o),label:"Numero de operacion",type:"number",rules:p.value.paymentSequence},null,8,["modelValue","rules"])]),_:1}),e(I,{cols:"6"},{default:l(()=>[e(P,{modelValue:t.value.paymentAmount,"onUpdate:modelValue":a[2]||(a[2]=o=>t.value.paymentAmount=o),readonly:"",label:"Monto",type:"number",rules:p.value.paymentAmount},null,8,["modelValue","rules"])]),_:1}),e(I,{cols:"6"},{default:l(()=>[e(P,{modelValue:t.value.paymentDate,"onUpdate:modelValue":a[3]||(a[3]=o=>t.value.paymentDate=o),label:"Fecha",type:"date",rules:p.value.paymentDate},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(B,null,{default:l(()=>[e(w,{type:"button",variant:"tonal",color:"secondary",onClick:a[4]||(a[4]=o=>i.value=!1)},{default:l(()=>a[13]||(a[13]=[s(" Cancelar ")])),_:1}),e(w,{text:"Inscribirme",color:"primary",type:"submit",variant:"flat",value:"submit",loading:v.value},null,8,["loading"])]),_:1}),f("pre",null,"            "+m(t.value)+`
        `,1)]),_:1},8,["title"])]}),_:1},512)]),_:1},8,["modelValue"]))}}),Ge=q({__name:"CourseView",setup(r){const c=ye(),n=g(null),y=g([]),i=g(""),v=async()=>{i.value=c.params.id,n.value=await Ve(i.value,2),y.value=await ge(n.value.id,2)};return ve(()=>{v()}),(p,t)=>{var V;const _=K("LnxIcon");return C(),$(D,null,[e(A,{title:(V=n.value)==null?void 0:V.name,subtitle:"Cursos",class:"rounded-0",elevation:"0"},{append:l(()=>[e(w,{variant:"text",onClick:t[0]||(t[0]=d=>p.$router.go(-1))},{prepend:l(()=>[e(_,{iconName:"arrow-left-3",size:"large"})]),default:l(()=>[t[1]||(t[1]=s(" Atrás "))]),_:1})]),_:1},8,["title"]),e(le,null,{default:l(()=>[e(L,{class:""},{default:l(()=>[e(I,{cols:"12",md:"7",lg:"8"},{default:l(()=>[e(L,null,{default:l(()=>[(C(!0),$(D,null,T(y.value,(d,u)=>(C(),S(I,{cols:"12",key:u},{default:l(()=>[e(A,{elevation:"0",class:"rounded-5 border",subtitle:d==null?void 0:d.area},{append:l(()=>{var a;return[((a=n.value)==null?void 0:a.isEnrolled)==!0?(C(),S(w,{key:0,density:"compact",variant:"outlined"},{default:l(()=>[e(Pe,{course:d,onSuccess:v},null,8,["course"]),t[2]||(t[2]=s(" Inscríbete "))]),_:2},1024)):z("",!0)]}),default:l(()=>[e(j,{class:"pt-0"},{default:l(()=>[f("small",null,[f("strong",null,m(d.code)+" - ",1),s(" "+m(d.name),1)])]),_:2},1024),e(M,null,{default:l(()=>[f("small",null," Creditos "+m(d.credits)+" | "+m(d.hoursPractice)+" Hr. Practicas | "+m(d.hoursTheory)+" Hr. Teoricas ",1)]),_:2},1024)]),_:2},1032,["subtitle"])]),_:2},1024))),128))]),_:1})]),_:1}),e(I,{cols:"12",md:"5",lg:"4"},{default:l(()=>[e(A,{elevation:"0",class:"rounded-5 border"},{default:l(()=>{var d;return[e(j,null,{default:l(()=>t[3]||(t[3]=[s("Contenido")])),_:1}),e(M,null,{default:l(()=>[e(fe,{"two-line":""},{default:l(()=>[e(x,null,{default:l(()=>[e(G,null,{default:l(()=>t[4]||(t[4]=[s(" Cursos ")])),_:1}),e(F,{"three-line":""},{default:l(()=>{var u,a,b;return[s(m((u=n.value)==null?void 0:u.coursesCount)+", "+m((a=n.value)==null?void 0:a.hoursPractice)+" Hr. Practicas, "+m((b=n.value)==null?void 0:b.hoursTheory)+" Hr. Teoricas ",1)]}),_:1})]),_:1}),e(x,null,{default:l(()=>[e(G,null,{default:l(()=>t[5]||(t[5]=[s(" Cantidad de creditos ")])),_:1}),e(F,null,{default:l(()=>{var u;return[s(m((u=n.value)==null?void 0:u.credits),1)]}),_:1})]),_:1}),e(x,null,{default:l(()=>[e(G,null,{default:l(()=>t[6]||(t[6]=[s(" Area(s) ")])),_:1}),e(F,null,{default:l(()=>{var u;return[s(m((u=n.value)==null?void 0:u.areas),1)]}),_:1})]),_:1}),e(x,null,{default:l(()=>[e(G,null,{default:l(()=>t[7]||(t[7]=[s(" Precio de matricula ")])),_:1}),e(F,null,{default:l(()=>{var u;return[s(" S/. "+m((u=n.value)==null?void 0:u.prices),1)]}),_:1})]),_:1})]),_:1})]),_:1}),((d=n.value)==null?void 0:d.isEnrolled)==!1?(C(),S(B,{key:0},{default:l(()=>[e(w,{block:"",class:"mt-2"},{default:l(()=>[t[8]||(t[8]=s(" Matricular ")),e(Se,{module:n.value,onSuccess:v},null,8,["module"])]),_:1})]),_:1})):z("",!0)]}),_:1})]),_:1})]),_:1})]),_:1})],64)}}});export{Ge as default};
