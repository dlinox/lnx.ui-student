import{a as H,V as R,b as W,c as j,e as q,f as P,g as Y,h as J}from"./VItem-BAMg8oIu.js";import{u as X}from"./period.stores-Dhz9p-V_.js";import{d as A,b as y,I as Z,c as i,aY as K,w as e,a,k as Q,V as w,aU as x,i as r,aS as $,F as G,aT as ee,b0 as ae,e as U,f as u,J as F,aX as k,aC as s,aW as le,h as I,o as d,aI as B,r as L,aD as V,aF as C,a_ as N,aZ as E,b1 as te,aE as oe,v as re,g as ne,ae as se}from"./index-BXNEzOpw.js";import{V as ue}from"./VForm-DF-W9n-Z.js";import{b as de,V as h,a as T}from"./VRow-CO1f27sH.js";const ie=()=>[{title:"Opciones",value:"actions",fixed:!0,width:"70px",align:"center"},{title:"Modulo",value:"module"},{title:"Curso",value:"course",minWidth:"280px"},{title:"Grupo",value:"group",minWidth:"250px"},{title:"Docente",value:"teacher"},{title:"Estado",value:"enrollmentStatus"}],ce={class:"d-flex justify-end"},pe=A({__name:"ChangeEnrollmentGroup",props:{group:{}},emits:["success"],setup(D,{emit:_}){const S=_,n=D,f=y(null),p=y({groupId:null}),m=y(!1),t=y(!1),c=y([]),g=async()=>{p.value.groupId&&(t.value=!0,await q({groupId:p.value.groupId,id:n.group.id}),S("success"),m.value=!1,t.value=!1)},v=async()=>{p.value={groupId:null},c.value=await j({groupId:n.group.groupId})};return Z(()=>m.value,b=>{b&&v()}),(b,l)=>(d(),i(K,{"max-width":"600",modelValue:m.value,"onUpdate:modelValue":l[1]||(l[1]=o=>m.value=o),activator:"parent"},{default:e(()=>[a(ue,{ref_key:"formRef",ref:f,onSubmit:Q(g,["prevent"])},{default:e(()=>[a(w,{title:"Cambiar grupo",subtitle:"Selecciona un grupo"},{default:e(()=>[a(H,{mandatory:"",class:"border-t"},{default:e(()=>[a(de,{style:{height:"auto","max-height":"280px","overflow-y":"auto"}},{default:e(()=>[c.value.length===0?(d(),i(R,{key:0,type:"warning",variant:"outlined"},{default:e(()=>l[2]||(l[2]=[r(" No otros grupos habilitados para este curso. ")])),_:1})):x("",!0),a(h,{dense:""},{default:e(()=>[(d(!0),$(G,null,ee(c.value,(o,z)=>(d(),i(T,{key:z,cols:"12"},{default:e(()=>[a(W,null,{default:e(({isSelected:O,toggle:M})=>[a(w,{color:O?"primary":"",variant:O?"tonal":"plain",onClick:ge=>{M&&M(),p.value.groupId=o.id},class:"border"},{default:e(()=>[a(ae,null,{default:e(()=>[a(U,null,{default:e(()=>[u("div",ce,[F((d(),i(k,{class:"rounded-0",variant:"flat",color:o.enrolledStudents/o.minStudents*100>=100?"green-accent-3":o.enrolledStudents/o.minStudents*100>=80?"amber-lighten-2":"red-accent-3"},{default:e(()=>[r(s(`${o.enrolledStudents} / ${o.minStudents}`),1)]),_:2},1032,["color"])),[[B,"Estudiantes inscritos / Mínimo de estudiantes","top"]])]),r(" "+s(o.group)+" - ",1),u("strong",null," S/. "+s(o.price),1),l[7]||(l[7]=u("br",null,null,-1)),a(k,{class:"rounded-0",density:"compact",color:"info",rounded:"sm"},{default:e(()=>[r(s(o.modality),1)]),_:2},1024),l[8]||(l[8]=u("br",null,null,-1)),u("small",null,[l[3]||(l[3]=r(" Docente: ")),u("strong",null,s(o.teacher),1)]),l[9]||(l[9]=u("br",null,null,-1)),u("small",null,[l[4]||(l[4]=r(" Laboratorio: ")),u("strong",null,s(o.laboratory),1)]),l[10]||(l[10]=u("br",null,null,-1)),u("small",null,[l[6]||(l[6]=r(" Horarios: ")),o.schedules?(d(),i(k,{key:0,rounded:"sm",class:"rounded-0 me-1",density:"compact",color:"primary"},{default:e(()=>[r(s(o.schedules.days)+" "+s(o.schedules.startHour)+" - "+s(o.schedules.endHour),1)]),_:2},1024)):(d(),i(k,{key:1,rounded:"sm",class:"rounded-0 me-1",density:"compact",color:"primary"},{default:e(()=>l[5]||(l[5]=[r(" No hay horarios ")])),_:1}))])]),_:2},1024)]),_:2},1024)]),_:2},1032,["color","variant","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),a(le,null,{default:e(()=>[a(I,{type:"button",variant:"tonal",color:"secondary",onClick:l[0]||(l[0]=o=>m.value=!1)},{default:e(()=>l[11]||(l[11]=[r(" Cancelar ")])),_:1}),a(I,{text:"Cambiar grupo",color:"primary",type:"submit",variant:"flat",value:"submit",loading:t.value},null,8,["loading"])]),_:1})]),_:1})]),_:1},512)]),_:1},8,["modelValue"]))}}),me={class:"text-primary font-weight-bold"},fe=A({__name:"DataTable",setup(D){const _=X();return(S,n)=>{const f=L("LnxIcon"),p=L("LnxDialogConfirm"),m=L("LnxDataTable");return d(),i(w,null,{default:e(()=>[a(m,{headers:V(ie)(),loadDataTable:V(P)},{header:e(({request:t,initDataTable:c,loadingTable:g,debouncedReload:v,reLoadDataTable:b})=>[a(U,{class:"border-t border-b"},{default:e(()=>[a(h,{class:"d-flex justify-space-between align-center"},{default:e(()=>[a(T,{cols:"12",md:"4"},{default:e(()=>[a(ne,{modelValue:t.search,"onUpdate:modelValue":l=>t.search=l,label:"Buscar",clearable:"",onInput:v,"onClick:clear":b},null,8,["modelValue","onUpdate:modelValue","onInput","onClick:clear"])]),_:2},1024),a(T,{cols:"12",md:"4",class:"text-end"},{default:e(()=>[F((d(),i(I,{icon:"",variant:"tonal",density:"comfortable",onClick:c,loading:g},{default:e(()=>[a(f,{iconName:"refresh"})]),_:2},1032,["onClick","loading"])),[[B,"Recargar registros"]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),"item.actions":e(({item:t,loadDataTable:c})=>{var g,v;return[t.period==((v=(g=V(_))==null?void 0:g.enrolled)==null?void 0:v.name)&&(t.enrollmentStatus=="MATRICULADO"||t.enrollmentStatus=="RESERVADO")?(d(),i(te,{key:0,density:"compact"},{activator:e(({props:b})=>[a(I,re({icon:"",color:"primary"},b,{density:"compact",variant:"tonal"}),{default:e(()=>[a(f,{iconName:"setting-5"})]),_:2},1040)]),default:e(()=>[a(oe,{density:"compact"},{default:e(()=>[t.enrollmentStatus=="MATRICULADO"?(d(),i(C,{key:0,value:"changeGroup"},{default:e(()=>[a(pe,{onSuccess:c,group:t},null,8,["onSuccess","group"]),n[0]||(n[0]=r(" Cambiar grupo "))]),_:2},1024)):x("",!0),t.enrollmentStatus=="MATRICULADO"?(d(),i(C,{key:1,value:"reserver"},{default:e(()=>[a(p,{title:"Reservar matrícula",message:"¿Estás seguro de que deseas reservar la matrícula? Esta acción es irreversible y no podrás deshacerla.",onOnConfirm:()=>{V(Y)({id:t.id}),c()}},{default:e(()=>[a(R,null,{default:e(()=>n[1]||(n[1]=[u("small",null," Si decide reservar la matrícula, el pago no podrá ser utilizado para otro curso, grupo o módulo. La reserva asegura su cupo, pero el monto abonado quedará exclusivamente asociado a esa matrícula. ",-1)])),_:1})]),_:2},1032,["onOnConfirm"]),n[2]||(n[2]=r(" Reservar "))]),_:2},1024)):x("",!0),t.enrollmentStatus=="MATRICULADO"||t.enrollmentStatus=="RESERVADO"?(d(),i(C,{key:2,value:"cancel"},{default:e(()=>[a(p,{title:"Cancelar matrícula",message:"¿Estás seguro de que deseas cancelar la matrícula? Esta acción es irreversible y podría afectar el uso de tu pago.",onOnConfirm:()=>{V(J)({id:t.id}),c()}},{default:e(()=>[a(R,null,{default:e(()=>n[3]||(n[3]=[u("small",null," Si cancela su matrícula, podrá aplicar el pago realizado a la inscripción de otro curso o módulo dentro de la plataforma. ",-1)])),_:1})]),_:2},1032,["onOnConfirm"]),n[4]||(n[4]=r(" Cancelar matrícula "))]),_:2},1024)):x("",!0)]),_:2},1024)]),_:2},1024)):x("",!0)]}),"item.course":e(({item:t})=>[a(C,null,{default:e(()=>[a(N,{class:"text-subtitle-2 font-weight-bold"},{default:e(()=>[r(s(t.course),1)]),_:2},1024),a(E,null,{default:e(()=>[r(s(t.area),1)]),_:2},1024)]),_:2},1024)]),"item.group":e(({item:t})=>[a(C,null,{default:e(()=>[a(N,{class:"text-subtitle-2"},{default:e(()=>[r(s(t.period)+" - ",1),u("span",me,s(t.group),1)]),_:2},1024),a(E,null,{default:e(()=>[r(s(t.laboratory),1)]),_:2},1024),a(E,null,{default:e(()=>[r(s(t.modality),1)]),_:2},1024)]),_:2},1024)]),_:1},8,["headers","loadDataTable"])]),_:1})}}}),Ce=A({__name:"EnrollmentView",setup(D){const _=async()=>{};return se(()=>{_()}),(S,n)=>{const f=L("LnxIcon");return d(),$(G,null,[a(w,{title:"Mis matriculas",subtitle:"Lista de matriculas realizadas",class:"rounded-0"},{append:e(()=>[a(I,{variant:"text",onClick:n[0]||(n[0]=p=>S.$router.go(-1))},{prepend:e(()=>[a(f,{iconName:"arrow-left-3",size:"large"})]),default:e(()=>[n[1]||(n[1]=r(" Atrás "))]),_:1})]),_:1}),a(fe)],64)}}});export{Ce as default};
