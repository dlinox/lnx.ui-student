import{n as $,d as P,b as i,I as H,c as b,aY as R,w as a,a as l,k as Y,V as N,aU as _,i as n,aS as S,F as k,aT as D,b0 as O,e as F,f as u,aC as r,aX as B,ab as W,g as A,aW as X,h as E,o as s}from"./index-DgkKF6Ex.js";import{a as j,V as z,b as J,c as K,d as Q}from"./VItem-DQ8mqnPu.js";import{V as Z}from"./VForm-Wfrmmks5.js";import{b as h,V as M,a as y}from"./VRow-BtM20XH7.js";const U="courses",oe=async(d,m)=>{try{return(await $().get(`${U}/curriculum/${m}/module/${d}`)).data.data}catch{return[]}},ue=async d=>{try{return(await $().get(`${U}/extracurricular/${d}`)).data.data}catch{return[]}},ne=P({__name:"EnrollmentGroup",props:{course:{}},emits:["success"],setup(d,{emit:m}){const g=m,q=d,p=i(!1),C=i(!1),f=i([]),o=i({paymentMethod:null,paymentSequence:null,paymentAmount:null,paymentDate:null,groupId:null}),w=i([]),G=async()=>{C.value=!0,await Q(o.value)&&(g("success"),p.value=!1),C.value=!1,console.log(o.value)},L=async()=>{o.value={paymentMethod:null,paymentSequence:null,paymentAmount:null,paymentDate:null,groupId:null},w.value=await K({courseId:q.course.id})};return H(()=>p.value,v=>{v&&L()}),(v,e)=>(s(),b(R,{"max-width":"600",modelValue:p.value,"onUpdate:modelValue":e[5]||(e[5]=V=>p.value=V),activator:"parent"},{default:a(()=>[l(Z,{ref:"formRef",onSubmit:Y(G,["prevent"])},{default:a(()=>{var V;return[l(N,{title:(V=v.course)==null?void 0:V.name,subtitle:"Registrar pago"},{default:a(()=>[l(j,{mandatory:"",class:"border-t"},{default:a(()=>[l(h,{style:{height:"auto","max-height":"280px","overflow-y":"auto"}},{default:a(()=>[w.value.length===0?(s(),b(z,{key:0,type:"warning",variant:"tonal"},{default:a(()=>e[6]||(e[6]=[n(" No hay grupos habilitados para este curso. ")])),_:1})):_("",!0),l(M,{dense:""},{default:a(()=>[(s(!0),S(k,null,D(w.value,(t,T)=>(s(),b(y,{key:T,cols:"12"},{default:a(()=>[l(J,null,{default:a(({isSelected:I,toggle:x})=>[l(N,{color:I?"primary":"",variant:I?"tonal":"plain",onClick:c=>{x&&x(),o.value.groupId=t.id,o.value.paymentAmount=t.price},class:"border"},{default:a(()=>[l(O,null,{default:a(()=>[l(F,null,{default:a(()=>[n(r(t.group)+" - ",1),u("strong",null," S/. "+r(t.price),1),e[10]||(e[10]=u("br",null,null,-1)),l(B,{class:"rounded-0",density:"compact",color:"info",rounded:"sm"},{default:a(()=>[n(r(t.modality),1)]),_:2},1024),e[11]||(e[11]=u("br",null,null,-1)),u("small",null,[e[7]||(e[7]=n("Docente: ")),u("strong",null,r(t.teacher),1)]),e[12]||(e[12]=u("br",null,null,-1)),u("small",null,[e[8]||(e[8]=n(" Laboratorio: ")),u("strong",null,r(t.laboratory),1)]),e[13]||(e[13]=u("br",null,null,-1)),u("small",null,[e[9]||(e[9]=n(" Horarios: ")),(s(!0),S(k,null,D(t.schedules,c=>(s(),b(B,{rounded:"sm",class:"rounded-0 me-1",density:"compact",color:"primary"},{default:a(()=>[n(r(c.day)+" "+r(c.startHour)+" - "+r(c.endHour),1)]),_:2},1024))),256))])]),_:2},1024)]),_:2},1024)]),_:2},1032,["color","variant","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),l(F,{class:"border-t border-b"},{default:a(()=>[l(M,null,{default:a(()=>[l(y,{cols:"6"},{default:a(()=>[l(W,{modelValue:o.value.paymentMethod,"onUpdate:modelValue":e[0]||(e[0]=t=>o.value.paymentMethod=t),items:[{title:"BN - VENTANILLA",value:7},{title:"BN - PAGALO.PE",value:9}],label:"Pago en",rules:f.value.paymentMethod},null,8,["modelValue","rules"])]),_:1}),l(y,{cols:"6"},{default:a(()=>[l(A,{modelValue:o.value.paymentSequence,"onUpdate:modelValue":e[1]||(e[1]=t=>o.value.paymentSequence=t),label:"Numero de operacion",type:"number",rules:f.value.paymentSequence},null,8,["modelValue","rules"])]),_:1}),l(y,{cols:"6"},{default:a(()=>[l(A,{modelValue:o.value.paymentAmount,"onUpdate:modelValue":e[2]||(e[2]=t=>o.value.paymentAmount=t),readonly:"",label:"Monto",type:"number",rules:f.value.paymentAmount},null,8,["modelValue","rules"])]),_:1}),l(y,{cols:"6"},{default:a(()=>[l(A,{modelValue:o.value.paymentDate,"onUpdate:modelValue":e[3]||(e[3]=t=>o.value.paymentDate=t),label:"Fecha",type:"date",rules:f.value.paymentDate},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),l(X,null,{default:a(()=>[l(E,{type:"button",variant:"tonal",color:"secondary",onClick:e[4]||(e[4]=t=>p.value=!1)},{default:a(()=>e[14]||(e[14]=[n(" Cancelar ")])),_:1}),l(E,{text:"Inscribirme",color:"primary",type:"submit",variant:"flat",value:"submit",loading:C.value},null,8,["loading"])]),_:1})]),_:1},8,["title"])]}),_:1},512)]),_:1},8,["modelValue"]))}});export{ne as _,ue as a,oe as b};
