import{d as R,b as v,I as H,c as b,aY as O,w as l,a as e,k as j,V as C,r as $,e as k,ab as z,g as M,aT as U,h as g,i as n,o as c,ae as G,aQ as T,F as B,aR as Q,aS as P,f as N,aC as s,aW as W,aV as Y,aE as Z,aF as w,aZ as A,a_ as L,a$ as J}from"./index-BpM1mP1k.js";import{c as K,a as X,d as h,e as ee}from"./EnrollmentGroup.vue_vue_type_script_setup_true_lang-BqFmi9b-.js";import{V as le}from"./VForm-spJSdswS.js";import{V as F,a as V,b as ae}from"./VRow-x8onk7vY.js";const _=I=>!!I||"Obligatorio",D=()=>({moduleId:null,curriculumId:null,paymentAmount:null,paymentMethod:null,paymentDate:null,paymentSequence:null}),q={moduleId:[_],curriculumId:[_],paymentAmount:[_],paymentMethod:[_],paymentDate:[_],paymentSequence:[_]},te=R({__name:"Enrollment",props:{studentId:{},module:{}},emits:["success"],setup(I,{emit:x}){const o=x,y=I,r=v(!1),i=v(!1),m=v(q),a=v(Object.assign({},D())),E=async()=>{i.value=!0,await K(a.value)&&(o("success"),r.value=!1),i.value=!1},S=async()=>{a.value=Object.assign({},D()),m.value=q,a.value.moduleId=y.module.id,a.value.paymentAmount=y.module.prices,a.value.curriculumId=y.module.curriculumId};return H(()=>r.value,u=>{u&&S()}),(u,t)=>{const p=$("LnxIcon");return c(),b(O,{"max-width":"600",modelValue:r.value,"onUpdate:modelValue":t[5]||(t[5]=f=>r.value=f),activator:"parent"},{default:l(()=>[e(le,{ref:"formRef",onSubmit:j(E,["prevent"])},{default:l(()=>{var f;return[e(C,{title:(f=u.module)==null?void 0:f.name,subtitle:"Registrar pago"},{default:l(()=>[e(C,{color:"info",variant:"tonal",subtitle:"El pago debe ser realizado con un dia de anticipación.",elevation:"0",class:"rounded-0"},{prepend:l(()=>[e(p,{iconName:"info-circle"})]),_:1}),e(k,{class:"border-t border-b"},{default:l(()=>[e(F,null,{default:l(()=>[e(V,{cols:"6"},{default:l(()=>[e(z,{modelValue:a.value.paymentMethod,"onUpdate:modelValue":t[0]||(t[0]=d=>a.value.paymentMethod=d),items:[{title:"BN - VENTANILLA",value:7},{title:"BN - PAGALO.PE",value:9}],label:"Pago en",rules:m.value.paymentMethod},null,8,["modelValue","rules"])]),_:1}),e(V,{cols:"6"},{default:l(()=>[e(M,{modelValue:a.value.paymentSequence,"onUpdate:modelValue":t[1]||(t[1]=d=>a.value.paymentSequence=d),label:"Numero de operacion",type:"number",rules:m.value.paymentSequence},null,8,["modelValue","rules"])]),_:1}),e(V,{cols:"6"},{default:l(()=>[e(M,{modelValue:a.value.paymentAmount,"onUpdate:modelValue":t[2]||(t[2]=d=>a.value.paymentAmount=d),readonly:"",label:"Monto",type:"number",rules:m.value.paymentAmount},null,8,["modelValue","rules"])]),_:1}),e(V,{cols:"6"},{default:l(()=>[e(M,{modelValue:a.value.paymentDate,"onUpdate:modelValue":t[3]||(t[3]=d=>a.value.paymentDate=d),label:"Fecha",type:"date",rules:m.value.paymentDate},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(U,null,{default:l(()=>[e(g,{type:"button",variant:"tonal",color:"secondary",onClick:t[4]||(t[4]=d=>r.value=!1)},{default:l(()=>t[6]||(t[6]=[n("Cancelar")])),_:1}),e(g,{text:"Matricular",color:"primary",type:"submit",loading:i.value},null,8,["loading"])]),_:1})]),_:1},8,["title"])]}),_:1},512)]),_:1},8,["modelValue"])}}}),re=R({__name:"CourseView",setup(I){const x=J(),o=v(null),y=v([]),r=v(""),i=async()=>{r.value=x.params.id,o.value=await h(r.value,2),y.value=await ee(o.value.id,2)};return G(()=>{i()}),(m,a)=>{var S;const E=$("LnxIcon");return c(),T(B,null,[e(C,{title:(S=o.value)==null?void 0:S.name,subtitle:"Cursos",class:"rounded-0",elevation:"0"},{append:l(()=>[e(g,{variant:"text",onClick:a[0]||(a[0]=u=>m.$router.go(-1))},{prepend:l(()=>[e(E,{iconName:"arrow-left-3",size:"large"})]),default:l(()=>[a[1]||(a[1]=n(" Atrás "))]),_:1})]),_:1},8,["title"]),e(ae,null,{default:l(()=>[e(F,{class:""},{default:l(()=>[e(V,{cols:"12",md:"7",lg:"8"},{default:l(()=>[e(F,null,{default:l(()=>[(c(!0),T(B,null,Q(y.value,(u,t)=>(c(),b(V,{cols:"12",key:t},{default:l(()=>[e(C,{elevation:"0",class:"rounded-5 border",subtitle:u==null?void 0:u.area},{append:l(()=>{var p;return[((p=o.value)==null?void 0:p.isEnrolled)==!0&&!u.hasEnrollmentGroup?(c(),b(g,{key:0,density:"compact",variant:"outlined"},{default:l(()=>[e(X,{course:u,onSuccess:i},null,8,["course"]),a[2]||(a[2]=n(" Inscríbete "))]),_:2},1024)):(c(),b(W,{key:1,color:"primary",rounded:"0",class:"rounded-0"},{default:l(()=>[n(s(u.group)+" - "+s(u.period),1)]),_:2},1024))]}),default:l(()=>[e(P,{class:"pt-0"},{default:l(()=>[N("small",null,[N("strong",null,s(u.code)+" - ",1),n(" "+s(u.name),1)])]),_:2},1024),e(k,null,{default:l(()=>[n(s(u.description),1)]),_:2},1024),e(k,null,{default:l(()=>[N("small",null," Creditos "+s(u.credits)+" | "+s(u.hoursPractice)+" Hr. Practicas | "+s(u.hoursTheory)+" Hr. Teoricas ",1)]),_:2},1024)]),_:2},1032,["subtitle"])]),_:2},1024))),128))]),_:1})]),_:1}),e(V,{cols:"12",md:"5",lg:"4"},{default:l(()=>[e(C,{elevation:"0",class:"rounded-5 border"},{default:l(()=>{var u;return[e(P,null,{default:l(()=>a[3]||(a[3]=[n("Contenido")])),_:1}),e(k,null,{default:l(()=>[e(Z,{"two-line":""},{default:l(()=>[e(w,null,{default:l(()=>[e(A,null,{default:l(()=>a[4]||(a[4]=[n(" Cursos ")])),_:1}),e(L,{"three-line":""},{default:l(()=>{var t,p,f;return[n(s((t=o.value)==null?void 0:t.coursesCount)+", "+s((p=o.value)==null?void 0:p.hoursPractice)+" Hr. Practicas, "+s((f=o.value)==null?void 0:f.hoursTheory)+" Hr. Teoricas ",1)]}),_:1})]),_:1}),e(w,null,{default:l(()=>[e(A,null,{default:l(()=>a[5]||(a[5]=[n(" Cantidad de creditos ")])),_:1}),e(L,null,{default:l(()=>{var t;return[n(s((t=o.value)==null?void 0:t.credits),1)]}),_:1})]),_:1}),e(w,null,{default:l(()=>[e(A,null,{default:l(()=>a[6]||(a[6]=[n(" Area(s) ")])),_:1}),e(L,null,{default:l(()=>{var t;return[n(s((t=o.value)==null?void 0:t.areas),1)]}),_:1})]),_:1}),e(w,null,{default:l(()=>[e(A,null,{default:l(()=>a[7]||(a[7]=[n(" Precio de matricula ")])),_:1}),e(L,null,{default:l(()=>{var t;return[n(" S/. "+s((t=o.value)==null?void 0:t.prices),1)]}),_:1})]),_:1})]),_:1})]),_:1}),((u=o.value)==null?void 0:u.isEnrolled)==!1?(c(),b(U,{key:0},{default:l(()=>[e(g,{block:"",class:"mt-2"},{default:l(()=>[a[8]||(a[8]=n(" Matricular ")),e(te,{module:o.value,onSuccess:i},null,8,["module"])]),_:1})]),_:1})):Y("",!0)]}),_:1})]),_:1})]),_:1})]),_:1})],64)}}});export{re as default};
