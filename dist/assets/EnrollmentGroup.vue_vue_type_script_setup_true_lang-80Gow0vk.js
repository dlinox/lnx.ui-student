import{n as M,d as L,b as y,I as P,c as d,aY as _,w as a,a as t,k as H,V as D,aU as R,i as u,aS as h,F as Y,aT as j,b0 as J,e as $,f as n,J as O,aX as b,aC as r,ab as W,g as A,aW as X,h as E,o as s,aI as z}from"./index-BXNEzOpw.js";import{a as K,V as Q,b as Z,c as ee,d as le}from"./VItem-BAMg8oIu.js";import{V as ae}from"./VForm-DF-W9n-Z.js";import{b as te,V as F,a as c}from"./VRow-CO1f27sH.js";const B="courses",de=async(m,i)=>{try{return(await M().get(`${B}/curriculum/${i}/module/${m}`)).data.data}catch{return[]}},me=async m=>{try{return(await M().get(`${B}/extracurricular/${m}`)).data.data}catch{return[]}},oe={class:"d-flex justify-end"},ie=L({__name:"EnrollmentGroup",props:{course:{}},emits:["success"],setup(m,{emit:i}){const g=i,T=m,p=y(!1),C=y(!1),f=y([]),o=y({paymentMethod:null,paymentSequence:null,paymentAmount:null,paymentDate:null,groupId:null}),S=y([]),U=async()=>{C.value=!0,await le(o.value)&&(g("success"),p.value=!1),C.value=!1,console.log(o.value)},q=async()=>{o.value={paymentMethod:null,paymentSequence:null,paymentAmount:null,paymentDate:null,groupId:null},S.value=await ee({courseId:T.course.id})};return P(()=>p.value,v=>{v&&q()}),(v,e)=>(s(),d(_,{"max-width":"600",modelValue:p.value,"onUpdate:modelValue":e[5]||(e[5]=V=>p.value=V),activator:"parent"},{default:a(()=>[t(ae,{ref:"formRef",onSubmit:H(U,["prevent"])},{default:a(()=>{var V;return[t(D,{title:(V=v.course)==null?void 0:V.name,subtitle:"Registrar pago"},{default:a(()=>[t(K,{mandatory:"",class:"border-t"},{default:a(()=>[t(te,{style:{height:"auto","max-height":"280px","overflow-y":"auto"}},{default:a(()=>[S.value.length===0?(s(),d(Q,{key:0,type:"warning",variant:"tonal"},{default:a(()=>e[6]||(e[6]=[u(" No hay grupos habilitados para este curso. ")])),_:1})):R("",!0),t(F,{dense:""},{default:a(()=>[(s(!0),h(Y,null,j(S.value,(l,G)=>(s(),d(c,{key:G,cols:"12"},{default:a(()=>[t(Z,null,{default:a(({isSelected:I,toggle:k})=>[t(D,{color:I?"primary":"",variant:I?"tonal":"plain",onClick:w=>{k&&k(),o.value.groupId=l.id,o.value.paymentAmount=l.price},class:"border"},{default:a(()=>[t(J,null,{default:a(()=>[t($,null,{default:a(()=>[n("div",oe,[O((s(),d(b,{class:"rounded-0",variant:"flat",color:l.enrolledStudents/l.minStudents*100>=100?"green-accent-3":l.enrolledStudents/l.minStudents*100>=80?"amber-lighten-2":"red-accent-3"},{default:a(()=>[u(r(`${l.enrolledStudents} / ${l.minStudents}`),1)]),_:2},1032,["color"])),[[z,"Estudiantes inscritos / MÃ­nimo de estudiantes","top"]])]),u(" "+r(l.group)+" - ",1),n("strong",null," S/. "+r(l.price),1),e[11]||(e[11]=n("br",null,null,-1)),t(b,{class:"rounded-0",density:"compact",color:"info",rounded:"sm"},{default:a(()=>[u(r(l.modality),1)]),_:2},1024),e[12]||(e[12]=n("br",null,null,-1)),n("small",null,[e[7]||(e[7]=u("Docente: ")),n("strong",null,r(l.teacher),1)]),e[13]||(e[13]=n("br",null,null,-1)),n("small",null,[e[8]||(e[8]=u(" Laboratorio: ")),n("strong",null,r(l.laboratory),1)]),e[14]||(e[14]=n("br",null,null,-1)),n("small",null,[e[10]||(e[10]=u(" Horarios: ")),l.schedules?(s(),d(b,{key:0,rounded:"sm",class:"rounded-0 me-1",density:"compact",color:"primary"},{default:a(()=>{var w,x,N;return[u(r((w=l.schedules)==null?void 0:w.days)+" "+r((x=l.schedules)==null?void 0:x.startHour)+" - "+r((N=l.schedules)==null?void 0:N.endHour),1)]}),_:2},1024)):(s(),d(b,{key:1,rounded:"sm",class:"rounded-0 me-1",density:"compact",color:"primary"},{default:a(()=>e[9]||(e[9]=[u(" No hay horarios ")])),_:1}))])]),_:2},1024)]),_:2},1024)]),_:2},1032,["color","variant","onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),t($,{class:"border-t border-b"},{default:a(()=>[t(F,null,{default:a(()=>[t(c,{cols:"6"},{default:a(()=>[t(W,{modelValue:o.value.paymentMethod,"onUpdate:modelValue":e[0]||(e[0]=l=>o.value.paymentMethod=l),items:[{title:"BN - VENTANILLA",value:7},{title:"BN - PAGALO.PE",value:9}],label:"Pago en",rules:f.value.paymentMethod},null,8,["modelValue","rules"])]),_:1}),t(c,{cols:"6"},{default:a(()=>[t(A,{modelValue:o.value.paymentSequence,"onUpdate:modelValue":e[1]||(e[1]=l=>o.value.paymentSequence=l),label:"Numero de operacion",type:"number",rules:f.value.paymentSequence},null,8,["modelValue","rules"])]),_:1}),t(c,{cols:"6"},{default:a(()=>[t(A,{modelValue:o.value.paymentAmount,"onUpdate:modelValue":e[2]||(e[2]=l=>o.value.paymentAmount=l),readonly:"",label:"Monto",type:"number",rules:f.value.paymentAmount},null,8,["modelValue","rules"])]),_:1}),t(c,{cols:"6"},{default:a(()=>[t(A,{modelValue:o.value.paymentDate,"onUpdate:modelValue":e[3]||(e[3]=l=>o.value.paymentDate=l),label:"Fecha",type:"date",rules:f.value.paymentDate},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),t(X,null,{default:a(()=>[t(E,{type:"button",variant:"tonal",color:"secondary",onClick:e[4]||(e[4]=l=>p.value=!1)},{default:a(()=>e[15]||(e[15]=[u(" Cancelar ")])),_:1}),t(E,{text:"Inscribirme",color:"primary",type:"submit",variant:"flat",value:"submit",loading:C.value},null,8,["loading"])]),_:1})]),_:1},8,["title"])]}),_:1},512)]),_:1},8,["modelValue"]))}});export{ie as _,me as a,de as b};
