import{q as F,b as N,H as x,s as v,ad as Me,I as H,ae as $,af as q,p as Z,Q as ge,ag as D,ah as j,S as he,a2 as A,t as G,a as r,v as U,C as ye,a1 as X,ai as pe,aj as we,ak as be,al as Ie,Z as Se,L as ke,M as Ve,am as Ce,an as Te,N as Be,ao as Ee,ap as _e,aq as Ne,D as Re,ar as Le,as as De,a3 as Ae,at as Ye,Y as ze,a4 as Oe,au as We,av as Fe,aw as $e,ax as Ue,F as Xe,ay as qe,az as Ze,d as je,aA as Ge,c as oe,w as C,V as Je,e as Qe,f as Y,aB as Ke,aC as ue,aD as re,aE as se,aF as W,j as z,J as et,h as ie,a9 as ce,r as tt,aG as at,aH as lt,o as ve,aI as nt}from"./index-DgkKF6Ex.js";import{u as ot}from"./period.stores-BOuJyyan.js";import{u as J,m as Q,V as ut,a as rt}from"./VMain-h9M824Gt.js";import{V as de,m as st}from"./VToolbar-CkYXMGM8.js";const it=F({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function ct(e){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:o}=f;let b=0,t=0;const a=N(null),n=x(0),i=x(0),S=x(0),p=x(!1),l=x(!1),d=v(()=>Number(e.scrollThreshold)),u=v(()=>Me((d.value-n.value)/d.value||0)),s=()=>{const c=a.value;if(!c||o&&!o.value)return;b=n.value,n.value="window"in c?c.pageYOffset:c.scrollTop;const k=c instanceof Window?document.documentElement.scrollHeight:c.scrollHeight;if(t!==k){t=k;return}l.value=n.value<b,S.value=Math.abs(n.value-d.value)};return H(l,()=>{i.value=i.value||n.value}),H(p,()=>{i.value=0}),$(()=>{H(()=>e.scrollTarget,c=>{var P;const k=c?document.querySelector(c):window;k&&k!==a.value&&((P=a.value)==null||P.removeEventListener("scroll",s),a.value=k,a.value.addEventListener("scroll",s,{passive:!0}))},{immediate:!0})}),q(()=>{var c;(c=a.value)==null||c.removeEventListener("scroll",s)}),o&&H(o,s,{immediate:!0}),{scrollThreshold:d,currentScroll:n,currentThreshold:S,isScrollActive:p,scrollRatio:u,isScrollingUp:l,savedScroll:i}}const vt=F({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...st(),...Q(),...it(),height:{type:[Number,String],default:64}},"VAppBar"),dt=Z()({name:"VAppBar",props:vt(),emits:{"update:modelValue":e=>!0},setup(e,f){let{slots:o}=f;const b=N(),t=ge(e,"modelValue"),a=v(()=>{var E;const h=new Set(((E=e.scrollBehavior)==null?void 0:E.split(" "))??[]);return{hide:h.has("hide"),fullyHide:h.has("fully-hide"),inverted:h.has("inverted"),collapse:h.has("collapse"),elevate:h.has("elevate"),fadeImage:h.has("fade-image")}}),n=v(()=>{const h=a.value;return h.hide||h.fullyHide||h.inverted||h.collapse||h.elevate||h.fadeImage||!t.value}),{currentScroll:i,scrollThreshold:S,isScrollingUp:p,scrollRatio:l}=ct(e,{canScroll:n}),d=v(()=>a.value.hide||a.value.fullyHide),u=v(()=>e.collapse||a.value.collapse&&(a.value.inverted?l.value>0:l.value===0)),s=v(()=>e.flat||a.value.fullyHide&&!t.value||a.value.elevate&&(a.value.inverted?i.value>0:i.value===0)),c=v(()=>a.value.fadeImage?a.value.inverted?1-l.value:l.value:void 0),k=v(()=>{var _,M;if(a.value.hide&&a.value.inverted)return 0;const h=((_=b.value)==null?void 0:_.contentHeight)??0,E=((M=b.value)==null?void 0:M.extensionHeight)??0;return d.value?i.value<S.value||a.value.fullyHide?h+E:h:h+E});D(v(()=>!!e.scrollBehavior),()=>{j(()=>{d.value?a.value.inverted?t.value=i.value>S.value:t.value=p.value||i.value<S.value:t.value=!0})});const{ssrBootStyles:P}=he(),{layoutItemStyles:I}=J({id:e.name,order:v(()=>parseInt(e.order,10)),position:A(e,"location"),layoutSize:k,elementSize:x(void 0),active:t,absolute:A(e,"absolute")});return G(()=>{const h=de.filterProps(e);return r(de,U({ref:b,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...I.value,"--v-toolbar-image-opacity":c.value,height:void 0,...P.value},e.style]},h,{collapse:u.value,flat:s.value}),o)}),{}}}),mt=F({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...Ee(),...Be(),...Te(),...Q(),...Ce(),...Ve({tag:"footer"}),...ke()},"VFooter"),ft=Z()({name:"VFooter",props:mt(),setup(e,f){let{slots:o}=f;const b=N(),{themeClasses:t}=ye(e),{backgroundColorClasses:a,backgroundColorStyles:n}=X(A(e,"color")),{borderClasses:i}=pe(e),{elevationClasses:S}=we(e),{roundedClasses:p}=be(e),l=x(32),{resizeRef:d}=Ie(s=>{s.length&&(l.value=s[0].target.clientHeight)}),u=v(()=>e.height==="auto"?l.value:parseInt(e.height,10));return D(()=>e.app,()=>{const s=J({id:e.name,order:v(()=>parseInt(e.order,10)),position:v(()=>"bottom"),layoutSize:u,elementSize:v(()=>e.height==="auto"?void 0:u.value),active:v(()=>e.app),absolute:A(e,"absolute")});j(()=>{b.value=s.layoutItemStyles.value})}),G(()=>r(e.tag,{ref:d,class:["v-footer",t.value,a.value,i.value,S.value,p.value,e.class],style:[n.value,e.app?b.value:{height:Se(e.height)},e.style]},o)),{}}});function gt(e){let{rootEl:f,isSticky:o,layoutItemStyles:b}=e;const t=x(!1),a=x(0),n=v(()=>{const p=typeof t.value=="boolean"?"top":t.value;return[o.value?{top:"auto",bottom:"auto",height:void 0}:void 0,t.value?{[p]:Se(a.value)}:{top:b.value.top}]});$(()=>{H(o,p=>{p?window.addEventListener("scroll",S,{passive:!0}):window.removeEventListener("scroll",S)},{immediate:!0})}),q(()=>{window.removeEventListener("scroll",S)});let i=0;function S(){const p=i>window.scrollY?"up":"down",l=f.value.getBoundingClientRect(),d=parseFloat(b.value.top??0),u=window.scrollY-Math.max(0,a.value-d),s=l.height+Math.max(a.value,d)-window.scrollY-window.innerHeight,c=parseFloat(getComputedStyle(f.value).getPropertyValue("--v-body-scroll-y"))||0;l.height<window.innerHeight-d?(t.value="top",a.value=d):p==="up"&&t.value==="bottom"||p==="down"&&t.value==="top"?(a.value=window.scrollY+l.top-c,t.value=!0):p==="down"&&s<=0?(a.value=0,t.value="bottom"):p==="up"&&u<=0&&(c?t.value!=="top"&&(a.value=-u+c+d,t.value="top"):(a.value=l.top+u,t.value="top")),i=window.scrollY}return{isStuck:t,stickyStyles:n}}const ht=100,yt=20;function me(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function fe(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let f=0;for(let o=e.length-1;o>0;o--){if(e[o].t===e[o-1].t)continue;const b=me(f),t=(e[o].d-e[o-1].d)/(e[o].t-e[o-1].t);f+=(t-b)*Math.abs(t),o===e.length-1&&(f*=.5)}return me(f)*1e3}function pt(){const e={};function f(t){Array.from(t.changedTouches).forEach(a=>{(e[a.identifier]??(e[a.identifier]=new _e(yt))).push([t.timeStamp,a])})}function o(t){Array.from(t.changedTouches).forEach(a=>{delete e[a.identifier]})}function b(t){var p;const a=(p=e[t])==null?void 0:p.values().reverse();if(!a)throw new Error(`No samples for touch id ${t}`);const n=a[0],i=[],S=[];for(const l of a){if(n[0]-l[0]>ht)break;i.push({t:l[0],d:l[1].clientX}),S.push({t:l[0],d:l[1].clientY})}return{x:fe(i),y:fe(S),get direction(){const{x:l,y:d}=this,[u,s]=[Math.abs(l),Math.abs(d)];return u>s&&l>=0?"right":u>s&&l<=0?"left":s>u&&d>=0?"down":s>u&&d<=0?"up":wt()}}}return{addMovement:f,endTouch:o,getVelocity:b}}function wt(){throw new Error}function bt(e){let{el:f,isActive:o,isTemporary:b,width:t,touchless:a,position:n}=e;$(()=>{window.addEventListener("touchstart",h,{passive:!0}),window.addEventListener("touchmove",E,{passive:!1}),window.addEventListener("touchend",_,{passive:!0})}),q(()=>{window.removeEventListener("touchstart",h),window.removeEventListener("touchmove",E),window.removeEventListener("touchend",_)});const i=v(()=>["left","right"].includes(n.value)),{addMovement:S,endTouch:p,getVelocity:l}=pt();let d=!1;const u=x(!1),s=x(0),c=x(0);let k;function P(m,g){return(n.value==="left"?m:n.value==="right"?document.documentElement.clientWidth-m:n.value==="top"?m:n.value==="bottom"?document.documentElement.clientHeight-m:L())-(g?t.value:0)}function I(m){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const y=n.value==="left"?(m-c.value)/t.value:n.value==="right"?(document.documentElement.clientWidth-m-c.value)/t.value:n.value==="top"?(m-c.value)/t.value:n.value==="bottom"?(document.documentElement.clientHeight-m-c.value)/t.value:L();return g?Math.max(0,Math.min(1,y)):y}function h(m){if(a.value)return;const g=m.changedTouches[0].clientX,y=m.changedTouches[0].clientY,w=25,T=n.value==="left"?g<w:n.value==="right"?g>document.documentElement.clientWidth-w:n.value==="top"?y<w:n.value==="bottom"?y>document.documentElement.clientHeight-w:L(),V=o.value&&(n.value==="left"?g<t.value:n.value==="right"?g>document.documentElement.clientWidth-t.value:n.value==="top"?y<t.value:n.value==="bottom"?y>document.documentElement.clientHeight-t.value:L());(T||V||o.value&&b.value)&&(k=[g,y],c.value=P(i.value?g:y,o.value),s.value=I(i.value?g:y),d=c.value>-20&&c.value<80,p(m),S(m))}function E(m){const g=m.changedTouches[0].clientX,y=m.changedTouches[0].clientY;if(d){if(!m.cancelable){d=!1;return}const T=Math.abs(g-k[0]),V=Math.abs(y-k[1]);(i.value?T>V&&T>3:V>T&&V>3)?(u.value=!0,d=!1):(i.value?V:T)>3&&(d=!1)}if(!u.value)return;m.preventDefault(),S(m);const w=I(i.value?g:y,!1);s.value=Math.max(0,Math.min(1,w)),w>1?c.value=P(i.value?g:y,!0):w<0&&(c.value=P(i.value?g:y,!1))}function _(m){if(d=!1,!u.value)return;S(m),u.value=!1;const g=l(m.changedTouches[0].identifier),y=Math.abs(g.x),w=Math.abs(g.y);(i.value?y>w&&y>400:w>y&&w>3)?o.value=g.direction===({left:"right",right:"left",top:"down",bottom:"up"}[n.value]||L()):o.value=s.value>.5}const M=v(()=>u.value?{transform:n.value==="left"?`translateX(calc(-100% + ${s.value*t.value}px))`:n.value==="right"?`translateX(calc(100% - ${s.value*t.value}px))`:n.value==="top"?`translateY(calc(-100% + ${s.value*t.value}px))`:n.value==="bottom"?`translateY(calc(100% - ${s.value*t.value}px))`:L(),transition:"none"}:void 0);return D(u,()=>{var y,w;const m=((y=f.value)==null?void 0:y.style.transform)??null,g=((w=f.value)==null?void 0:w.style.transition)??null;j(()=>{var T,V,R,O;(V=f.value)==null||V.style.setProperty("transform",((T=M.value)==null?void 0:T.transform)||"none"),(O=f.value)==null||O.style.setProperty("transition",((R=M.value)==null?void 0:R.transition)||null)}),Ne(()=>{var T,V;(T=f.value)==null||T.style.setProperty("transform",m),(V=f.value)==null||V.style.setProperty("transition",g)})}),{isDragging:u,dragProgress:s,dragStyles:M}}function L(){throw new Error}const St=["start","end","left","right","top","bottom"],kt=F({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>St.includes(e)},sticky:Boolean,...Ee(),...Be(),...Ze(),...qe({mobile:null}),...Te(),...Q(),...Ce(),...Ve({tag:"nav"}),...ke()},"VNavigationDrawer"),Vt=Z()({name:"VNavigationDrawer",props:kt(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,f){let{attrs:o,emit:b,slots:t}=f;const{isRtl:a}=Re(),{themeClasses:n}=ye(e),{borderClasses:i}=pe(e),{backgroundColorClasses:S,backgroundColorStyles:p}=X(A(e,"color")),{elevationClasses:l}=we(e),{displayClasses:d,mobile:u}=Le(e),{roundedClasses:s}=be(e),c=De(),k=ge(e,"modelValue",null,B=>!!B),{ssrBootStyles:P}=he(),{scopeId:I}=Ae(),h=N(),E=x(!1),{runOpenDelay:_,runCloseDelay:M}=We(e,B=>{E.value=B}),m=v(()=>e.rail&&e.expandOnHover&&E.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),g=v(()=>Ye(e.location,a.value)),y=v(()=>e.persistent),w=v(()=>!e.permanent&&(u.value||e.temporary)),T=v(()=>e.sticky&&!w.value&&g.value!=="bottom");D(()=>e.expandOnHover&&e.rail!=null,()=>{H(E,B=>b("update:rail",!B))}),D(()=>!e.disableResizeWatcher,()=>{H(w,B=>!e.permanent&&ze(()=>k.value=!B))}),D(()=>!e.disableRouteWatcher&&!!c,()=>{H(c.currentRoute,()=>w.value&&(k.value=!1))}),H(()=>e.permanent,B=>{B&&(k.value=!0)}),e.modelValue==null&&!w.value&&(k.value=e.permanent||!u.value);const{isDragging:V,dragProgress:R}=bt({el:h,isActive:k,isTemporary:w,width:m,touchless:A(e,"touchless"),position:g}),O=v(()=>{const B=w.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):m.value;return V.value?B*R.value:B}),{layoutItemStyles:K,layoutItemScrimStyles:xe}=J({id:e.name,order:v(()=>parseInt(e.order,10)),position:g,layoutSize:O,elementSize:m,active:v(()=>k.value||V.value),disableTransitions:v(()=>V.value),absolute:v(()=>e.absolute||T.value&&typeof ee.value!="string")}),{isStuck:ee,stickyStyles:Pe}=gt({rootEl:h,isSticky:T,layoutItemStyles:K}),te=X(v(()=>typeof e.scrim=="string"?e.scrim:null)),He=v(()=>({...V.value?{opacity:R.value*.2,transition:"none"}:void 0,...xe.value}));return Oe({VList:{bgColor:"transparent"}}),G(()=>{const B=t.image||e.image;return r(Xe,null,[r(e.tag,U({ref:h,onMouseenter:_,onMouseleave:M,class:["v-navigation-drawer",`v-navigation-drawer--${g.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":E.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":w.value,"v-navigation-drawer--persistent":y.value,"v-navigation-drawer--active":k.value,"v-navigation-drawer--sticky":T.value},n.value,S.value,i.value,d.value,l.value,s.value,e.class],style:[p.value,K.value,P.value,Pe.value,e.style]},I,o),{default:()=>{var ae,le,ne;return[B&&r("div",{key:"image",class:"v-navigation-drawer__img"},[t.image?r($e,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},t.image):r(Fe,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),t.prepend&&r("div",{class:"v-navigation-drawer__prepend"},[(ae=t.prepend)==null?void 0:ae.call(t)]),r("div",{class:"v-navigation-drawer__content"},[(le=t.default)==null?void 0:le.call(t)]),t.append&&r("div",{class:"v-navigation-drawer__append"},[(ne=t.append)==null?void 0:ne.call(t)])]}}),r(Ue,{name:"fade-transition"},{default:()=>[w.value&&(V.value||k.value)&&!!e.scrim&&r("div",U({class:["v-navigation-drawer__scrim",te.backgroundColorClasses.value],style:[He.value,te.backgroundColorStyles.value],onClick:()=>{y.value||(k.value=!1)}},I),null)]})])}),{isStuck:ee}}}),xt=je({__name:"AdminLayout",setup(e){const f=lt(),o=Ge(),b=ot(),t=N(!0),a=N(!1),n=N([""]),i=async()=>{a.value=!0,await at()&&f.push({name:"Login"}),a.value=!1},S=async()=>{b.getCurrent(),b.getEnrolled()};return $(()=>{S()}),(p,l)=>{const d=tt("RouterView");return ve(),oe(rt,{app:""},{default:C(()=>[r(Vt,{modelValue:t.value,"onUpdate:modelValue":l[1]||(l[1]=u=>t.value=u),app:"",color:"blue-grey-lighten-5 border-primary",border:1},{append:C(()=>[r(se,{"three-line":""},{default:C(()=>[r(W,{class:"py-2 border-t"},{append:C(()=>[et((ve(),oe(ie,{onClick:i,icon:"",density:"compact",variant:"tonal",loading:a.value},{default:C(()=>[r(z,{iconName:"logout-1"})]),_:1},8,["loading"])),[[nt,"Cerrar sesión","top"]])]),_:1})]),_:1})]),default:C(()=>[r(Je,{elevation:"0",class:"rounded-0",color:"primary",variant:"tonal"},{default:C(()=>[r(Qe,{class:"text-center"},{default:C(()=>l[3]||(l[3]=[Y("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/cb/Logo_UNAP.png/640px-Logo_UNAP.png",alt:"logo",width:"70"},null,-1)])),_:1}),r(Ke,{class:"border-t py-2"},{default:C(()=>{var u,s;return[Y("b",null,ue(re(o).authState.user.name),1),l[4]||(l[4]=Y("br",null,null,-1)),Y("small",null,ue((s=(u=re(o).authState.user)==null?void 0:u.role)==null?void 0:s.toUpperCase()),1)]}),_:1})]),_:1}),r(se,{nav:"",density:"compact",opened:n.value,"onUpdate:opened":l[0]||(l[0]=u=>n.value=u),color:"primary"},{default:C(()=>[r(W,{key:"panel",title:"Panel",to:"/",link:"",exact:""},{prepend:C(()=>[r(z,{iconName:"element-4"})]),_:1}),r(W,{key:"enrollment",title:"Matrículas",link:"",exact:"",to:{name:"Enrollment"}},{prepend:C(()=>[r(z,{iconName:"element-4"})]),_:1}),r(W,{key:"module",title:"Módulos",to:{name:"Modules"},link:"",exact:""},{prepend:C(()=>[r(z,{iconName:"element-4"})]),_:1})]),_:1},8,["opened"])]),_:1},8,["modelValue"]),r(dt,{floating:"",elevation:"0",app:""},{append:C(()=>l[5]||(l[5]=[])),default:C(()=>[r(ie,{icon:"",onClick:l[2]||(l[2]=u=>t.value=!t.value),size:"small"},{default:C(()=>[r(z,{iconName:"textalign-justifycenter"})]),_:1}),r(ce)]),_:1}),r(ut,null,{default:C(()=>[r(d)]),_:1}),r(ft,{app:""},{default:C(()=>[r(ce),l[6]||(l[6]=Y("small",null," v1.0 ",-1))]),_:1})]),_:1})}}});export{xt as default};
