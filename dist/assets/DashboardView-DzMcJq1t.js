import{h as b}from"./index-BoZKkaqZ.js";import{V as c,a as w}from"./VRow-DB3tsM5B.js";import{d as N,l as _,aa as L,c as S,w as a,a as t,V as m,e,aL as T,aM as V,F as k,aN as $,aO as l,aP as F,f as I,g as P,r as q,a7 as g,h as x,o as h}from"./index-CMWRQILe.js";import{V as z}from"./VContainer-DpzZP2Dk.js";const A="attendances",j=async p=>{try{return(await b().post(`${A}/assistants-by-day`,p)).data.data}catch{return[]}},M=async p=>{try{return(await b().post(`${A}/assistants-status-by-day`,p)).data.data}catch{return[]}},R={class:"text-h3 text-gray-darken-1"},U={class:"text-h3 text-blue-lighten-1"},G={class:"text-h3 center text-red-lighten-1"},O={class:"wrap-table"},H={class:"text-white"},J=N({__name:"AttendanceRecord",setup(p){const d=_([]),n=_({}),r=_(),i=_({date:null,periodId:null}),B=async()=>{i.value.date=r.value,d.value=await j(i.value)},C=async()=>{i.value.date=r.value,n.value=await M(i.value)},y=async()=>{await B(),await C()},D=async()=>{const o=new Intl.DateTimeFormat("es-PE",{year:"numeric",month:"2-digit",day:"2-digit"}).format(new Date),[u,s,v]=o.split("/");r.value=`${v}-${s}-${u}`,i.value.periodId=null,i.value.date=r.value,await y()};return L(()=>{D()}),(E,o)=>{const u=q("LnxIcon");return h(),S(w,{justify:"center"},{default:a(()=>[t(c,{cols:"12"},{default:a(()=>[t(m,{elevation:"0"},{title:a(()=>[t(w,null,{default:a(()=>[t(c,{cols:"12",md:"9"},{default:a(()=>o[1]||(o[1]=[e("small",null," Registro de asistencia ",-1)])),_:1}),t(c,{cols:"12",md:"3",class:"d-flex align-center justify-content-end"},{default:a(()=>[t(I,{modelValue:r.value,"onUpdate:modelValue":[o[0]||(o[0]=s=>r.value=s),y],label:"Fecha",class:"me-2",density:"compact",type:"date"},null,8,["modelValue"]),t(P,{variant:"tonal",size:"small",icon:"",onClick:y},{default:a(()=>[t(u,{iconName:"refresh"})]),_:1})]),_:1}),t(c,{cols:"12",sm:"6",md:"4"},{default:a(()=>[t(m,{elevation:"0",title:"Asistencia Total",subtitle:"Estudiantes que registraron asistencia"},{default:a(()=>[t(g,null,{default:a(()=>[e("div",R,[e("strong",null,[t(u,{iconName:"people",size:"x-large"}),x(" "+l(n.value.total)+" / "+l(n.value.totalStudents),1)])])]),_:1})]),_:1})]),_:1}),t(c,{cols:"12",sm:"6",md:"4"},{default:a(()=>[t(m,{color:"blue-lighten-1",variant:"tonal",title:"Asistencia temprana",subtitle:"Estudiantes que llegaron antes de la hora de inicio"},{default:a(()=>[t(g,null,{default:a(()=>[e("div",U,[e("strong",null,[t(u,{iconName:"people",size:"x-large"}),x(" "+l(n.value.early)+" / "+l(n.value.total),1)])])]),_:1})]),_:1})]),_:1}),t(c,{cols:"12",sm:"6",md:"4"},{default:a(()=>[t(m,{color:"red-lighten-1",variant:"tonal",title:"Asistencia tardía",subtitle:"Estudiantes que llegaron después de la hora de inicio"},{default:a(()=>[t(g,null,{default:a(()=>[e("div",G,[e("strong",null,[t(u,{iconName:"people",size:"x-large"}),x(" "+l(n.value.late)+" / "+l(n.value.total),1)])])]),_:1})]),_:1})]),_:1})]),_:1})]),default:a(()=>[e("div",O,[t(T,{class:"responsive"},{default:a(()=>[o[2]||(o[2]=e("thead",{class:"bg-blue-grey-lighten-1"},[e("tr",null,[e("th",{class:"text-left",style:{width:"160px"}},"Nivel"),e("th",{class:"text-left",style:{width:"150px"}},"Grado"),e("th",{class:"text-left",style:{width:"150px"}},"Grupo"),e("th",{class:"text-left",style:{width:"150px"}},"Estudiantes"),e("th",{class:"text-left",style:{width:"150px"}},"Asistieron"),e("th",{class:"text-left"},"(%)Porcentaje de asistencia")])],-1)),e("tbody",null,[(h(!0),V(k,null,$(d.value,(s,v)=>(h(),V("tr",{key:v},[e("td",null,l(s.educationLevel),1),e("td",null,l(s.grade),1),e("td",null,l(s.group),1),e("td",null,l(s.students),1),e("td",null,l(s.assistants),1),e("td",null,[t(F,{modelValue:s.assistants,"onUpdate:modelValue":f=>s.assistants=f,color:"blue-darken-4","bg-color":"blue-grey-darken-1","buffer-color":"#000000",rounded:"",height:"20",striped:"",max:s.students,class:"w-100"},{default:a(({value:f})=>[e("small",H,l(f?Math.ceil(f):0)+"%",1)]),_:2},1032,["modelValue","onUpdate:modelValue","max"])])]))),128))])]),_:1})])]),_:1})]),_:1})]),_:1})}}}),Y=N({__name:"DashboardView",setup(p){return(d,n)=>(h(),V(k,null,[t(m,{title:"Bienvenido",subtitle:"Sistema de gestión de asistencia",class:"rounded-0",elevation:"0"}),t(z,{fluid:""},{default:a(()=>[t(J)]),_:1})],64))}});export{Y as default};
