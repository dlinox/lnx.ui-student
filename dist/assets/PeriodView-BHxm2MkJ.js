import{d as I,l as b,E as S,c as A,aQ as T,w as a,a as e,aR as U,V as w,b as N,f as g,aA as u,a8 as k,aS as O,g as p,h as L,o as x,r as V,aT as P,ax as B,ay as E,G as $,aU as G,aa as M,aM as h,F as j}from"./index-CMWRQILe.js";import{_ as q,a as z,b as Y,c as Q}from"./index-CklmRQ5G.js";import{r as v}from"./rules.utils-DaB-ACZt.js";import{V as H,a as J}from"./VSwitch-B9IvAKOz.js";import{a as R,V as c}from"./VRow-DB3tsM5B.js";import"./index-BoZKkaqZ.js";const K=()=>({year:new Date().getFullYear(),type:null,startDate:null,endDate:null,isActive:!0}),W={year:[v],type:[v],startDate:[v],endDate:[v],isActive:[v]},X=["REGULAR","VACACIONAL","NIVELACION","RECUPERACION"],F=I({__name:"Form",props:{id:{}},emits:["success"],setup(C,{emit:_}){const m=_,n=C,r=W,f=b(null),d=b(!1),s=b(!1),l=b(Object.assign({},K())),y=async()=>{if(n.id){d.value=!0;const i=await q(n.id);l.value=i,d.value=!1}},D=async()=>{const{valid:i}=await f.value.validate();i&&(d.value=!0,await z(l.value),m("success"),s.value=!1,d.value=!1)};return S(()=>s.value,i=>{i&&y()}),(i,t)=>(x(),A(T,{"max-width":"500",modelValue:s.value,"onUpdate:modelValue":t[6]||(t[6]=o=>s.value=o),activator:"parent"},{default:a(()=>[e(H,{ref_key:"formRef",ref:f,onSubmit:U(D,["prevent"])},{default:a(()=>[e(w,{title:i.id?"Editar Registro":"Nuevo Registro"},{default:a(()=>[e(N,{class:"border-t border-b"},{default:a(()=>[e(R,null,{default:a(()=>[e(c,{cols:"4"},{default:a(()=>[e(g,{modelValue:l.value.year,"onUpdate:modelValue":t[0]||(t[0]=o=>l.value.year=o),label:"Año",required:"",rules:u(r).year,type:"number"},null,8,["modelValue","rules"])]),_:1}),e(c,{cols:"8"},{default:a(()=>[e(k,{modelValue:l.value.type,"onUpdate:modelValue":t[1]||(t[1]=o=>l.value.type=o),label:"Tipo de periodo",items:u(X),rules:u(r).type},null,8,["modelValue","items","rules"])]),_:1}),e(c,{cols:"6"},{default:a(()=>[e(g,{modelValue:l.value.startDate,"onUpdate:modelValue":t[2]||(t[2]=o=>l.value.startDate=o),label:"Fecha de inicio",required:"",rules:u(r).startDate,type:"date"},null,8,["modelValue","rules"])]),_:1}),e(c,{cols:"6"},{default:a(()=>[e(g,{modelValue:l.value.endDate,"onUpdate:modelValue":t[3]||(t[3]=o=>l.value.endDate=o),label:"Fecha de fin",required:"",rules:u(r).endDate,type:"date"},null,8,["modelValue","rules"])]),_:1}),e(c,{cols:"12",class:"d-flex justify-end"},{default:a(()=>[e(J,{modelValue:l.value.isActive,"onUpdate:modelValue":t[4]||(t[4]=o=>l.value.isActive=o),inset:"",density:"compact",color:"indigo",label:"Activo"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(O,null,{default:a(()=>[e(p,{type:"button",variant:"tonal",color:"secondary",onClick:t[5]||(t[5]=o=>s.value=!1)},{default:a(()=>t[7]||(t[7]=[L(" Cancelar ")])),_:1}),e(p,{text:"Guardar",color:"primary",type:"submit",variant:"flat",loading:d.value},null,8,["loading"])]),_:1})]),_:1},8,["title"])]),_:1},512)]),_:1},8,["modelValue"]))}}),Z=()=>[{title:"Opciones",value:"actions",fixed:!0,width:"70px",align:"center"},{title:"ID",value:"id"},{title:"Año",value:"year"},{title:"Tipo",value:"type"},{title:"Fecha de inicio",value:"startDate"},{title:"Fecha de fin",value:"endDate"},{title:"Activo",value:"isActive"}],ee=I({__name:"DataTable",setup(C){return(_,m)=>{const n=V("LnxIcon"),r=V("LnxDialogConfirm"),f=V("LnxStatusChip"),d=V("LnxDataTable");return x(),A(w,null,{default:a(()=>[e(d,{headers:u(Z)(),loadDataTable:u(Y)},{header:a(({request:s,loading:l,initDataTable:y,loadingTable:D,debouncedReload:i,reLoadDataTable:t})=>[e(N,{class:"border-t border-b"},{default:a(()=>[e(R,{class:"d-flex justify-space-between align-center"},{default:a(()=>[e(c,{cols:"12",md:"4"},{default:a(()=>[e(g,{modelValue:s.search,"onUpdate:modelValue":o=>s.search=o,label:"Buscar",clearable:"",onInput:i,"onClick:clear":t},null,8,["modelValue","onUpdate:modelValue","onInput","onClick:clear"])]),_:2},1024),e(c,{cols:"12",md:"4",class:"text-end"},{default:a(()=>[e(p,{class:"me-2",disabled:l},{default:a(()=>[m[0]||(m[0]=L(" nuevo ")),e(F,{id:null,onSuccess:y},null,8,["onSuccess"])]),_:2},1032,["disabled"]),$((x(),A(p,{icon:"",variant:"tonal",density:"comfortable",onClick:y,loading:D},{default:a(()=>[e(n,{iconName:"refresh"})]),_:2},1032,["onClick","loading"])),[[G,"Recargar registros"]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),"item.actions":a(({item:s,loadDataTable:l})=>[e(p,{icon:"",size:"small",variant:"text"},{default:a(()=>[e(n,{iconName:"setting-5"}),e(P,{activator:"parent"},{default:a(()=>[e(B,{nav:""},{default:a(()=>[e(E,{title:"Editar",density:"compact",value:"edit"},{prepend:a(()=>[e(n,{iconName:"message-edit"})]),default:a(()=>[e(F,{id:s.id,onSuccess:l},null,8,["id","onSuccess"])]),_:2},1024),e(E,{title:"Eliminar",class:"text-red",density:"compact",value:"delete"},{prepend:a(()=>[e(n,{iconName:"trash"})]),default:a(()=>[e(r,{title:"Eliminar registro",message:"¿Está seguro de eliminar este registro?",onOnConfirm:async()=>{await u(Q)(s.id),l()}},null,8,["onOnConfirm"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),"item.isActive":a(({item:s})=>[e(f,{value:s.isActive},null,8,["value"])]),_:1},8,["headers","loadDataTable"])]),_:1})}}}),ie=I({__name:"PeriodView",setup(C){const _=async()=>{};return M(()=>{_()}),(m,n)=>{const r=V("LnxIcon");return x(),h(j,null,[e(w,{title:"Periodos",subtitle:"Gestión de periodos académicos",class:"rounded-0"},{append:a(()=>[e(p,{variant:"text",onClick:n[0]||(n[0]=f=>m.$router.go(-1))},{prepend:a(()=>[e(r,{iconName:"arrow-left-3",size:"large"})]),default:a(()=>[n[1]||(n[1]=L(" Atrás "))]),_:1})]),_:1}),e(ee)],64)}}});export{ie as default};
