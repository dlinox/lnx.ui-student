import{n as z,p as E,q as U,s as Y,v as G,x as H,y as c,b as y,z as J,A as D,B as Q,C as $,D as W,a as l,F as X,E as Z,G as P,H as ee,I as te,J as ae,K as le,L as ne,M as oe,N as R,d as ue,c as se,w as u,e as p,V as ie,f as S,h as N,i as w,r as re,j as de,t as ce,O as fe,P as ve,Q as me,l as pe,o as ye}from"./index-BCiygQBv.js";import{_ as ge}from"./logo-BOg40ReT.js";import{V as be,a as C}from"./VRow-BY8_SUxz.js";import{V as xe}from"./VForm-BR8Hmo_o.js";import{V as Ve}from"./VContainer-BGw3r08E.js";const _e=E({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...ne(),...le(),...ae(oe({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),ke=z()({name:"VOtpInput",props:_e(),emits:{finish:t=>!0,"update:focused":t=>!0,"update:modelValue":t=>!0},setup(t,h){let{attrs:V,emit:g,slots:s}=h;const{dimensionStyles:b}=U(t),{isFocused:_,focus:k,blur:f}=Y(t),a=G(t,"modelValue","",e=>e==null?[]:String(e).split(""),e=>e.join("")),{t:F}=H(),m=c(()=>Number(t.length)),O=c(()=>Array(m.value).fill(0)),d=y(-1),A=y(),v=y([]),I=c(()=>v.value[d.value]);function j(){if(B(I.value.value)){I.value.value="";return}const e=a.value.slice(),n=I.value.value;e[d.value]=n;let i=null;d.value>a.value.length?i=a.value.length+1:d.value+1!==m.value&&(i="next"),a.value=e,i&&R(A.value,i)}function T(e){const n=a.value.slice(),i=d.value;let r=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(e.key)&&(e.preventDefault(),e.key==="ArrowLeft"?r="prev":e.key==="ArrowRight"?r="next":["Backspace","Delete"].includes(e.key)&&(n[d.value]="",a.value=n,d.value>0&&e.key==="Backspace"?r="prev":requestAnimationFrame(()=>{var o;(o=v.value[i])==null||o.select()})),requestAnimationFrame(()=>{r!=null&&R(A.value,r)}))}function q(e,n){var r,o;n.preventDefault(),n.stopPropagation();const i=((r=n==null?void 0:n.clipboardData)==null?void 0:r.getData("Text").slice(0,m.value))??"";B(i)||(a.value=i.split(""),(o=v.value)==null||o[e].blur())}function L(){a.value=[]}function K(e,n){k(),d.value=n}function M(){f(),d.value=-1}function B(e){return t.type==="number"&&/[^0-9]/g.test(e)}return J({VField:{color:c(()=>t.color),bgColor:c(()=>t.color),baseColor:c(()=>t.baseColor),disabled:c(()=>t.disabled),error:c(()=>t.error),variant:c(()=>t.variant)}},{scoped:!0}),D(a,e=>{e.length===m.value&&g("finish",e.join(""))},{deep:!0}),D(d,e=>{e<0||Q(()=>{var n;(n=v.value[e])==null||n.select()})}),$(()=>{var i;const[e,n]=W(V);return l("div",P({class:["v-otp-input",{"v-otp-input--divided":!!t.divider},t.class],style:[t.style]},e),[l("div",{ref:A,class:"v-otp-input__content",style:[b.value]},[O.value.map((r,o)=>l(X,null,[t.divider&&o!==0&&l("span",{class:"v-otp-input__divider"},[t.divider]),l(Z,{focused:_.value&&t.focusAll||d.value===o,key:o},{...s,loader:void 0,default:()=>l("input",{ref:x=>v.value[o]=x,"aria-label":F(t.label,o+1),autofocus:o===0&&t.autofocus,autocomplete:"one-time-code",class:["v-otp-input__field"],disabled:t.disabled,inputmode:t.type==="number"?"numeric":"text",min:t.type==="number"?0:void 0,maxlength:"1",placeholder:t.placeholder,type:t.type==="number"?"text":t.type,value:a.value[o],onInput:j,onFocus:x=>K(x,o),onBlur:M,onKeydown:T,onPaste:x=>q(o,x)},null)})])),l("input",P({class:"v-otp-input-input",type:"hidden"},n,{value:a.value.join("")}),null),l(ee,{contained:!0,"content-class":"v-otp-input__loader","model-value":!!t.loading,persistent:!0},{default:()=>{var r;return[((r=s.loader)==null?void 0:r.call(s))??l(te,{color:typeof t.loading=="boolean"?void 0:t.loading,indeterminate:!0,size:"24",width:"2"},null)]}}),(i=s.default)==null?void 0:i.call(s)])])}),{blur:()=>{var e;(e=v.value)==null||e.some(n=>n.blur())},focus:()=>{var e;(e=v.value)==null||e[0].focus()},reset:L,isFocused:_}}}),we={class:"w-100 text-caption py-3 text-grey-darken-2 text-center"},Se=ue({__name:"VerifyEmailView",setup(t){const h=pe(),V=fe(),g=y(""),s=y(!1),b=y(!1),_=async()=>{const f=V.params.t;b.value=!0,await ve({payload:f}),b.value=!1},k=async()=>{const f=V.params.payload;s.value=!0,await me({code:g.value,payload:f})&&h.push({name:"StudentType",params:{payload:f}}),s.value=!1};return(f,a)=>{const F=re("router-link");return ye(),se(Ve,{class:"h-min-screen h-100 pa-0 d-flex justify-center align-center flex-column"},{default:u(()=>[l(xe,{onSubmit:de(k,["prevent"]),class:"h-full"},{default:u(()=>[l(ie,{class:"",width:"400px"},{default:u(()=>[l(S,{class:"text-center"},{default:u(()=>a[1]||(a[1]=[p("img",{src:ge,alt:"logo",width:"70"},null,-1),p("h6",{class:"text-h6 pt-3 text-primary"}," Registro de nuevo estudiante ",-1)])),_:1}),l(S,{class:"px-6 border-t"},{default:u(()=>[l(be,null,{default:u(()=>[l(C,{cols:"12"},{default:u(()=>a[2]||(a[2]=[p("div",{class:"text-subtitle-1 text-center"}," Verificación de correo electrónico ",-1),p("div",{class:"text-caption text-center"}," Ingrese el codigo de verificación que se envió a su correo electrónico. ",-1)])),_:1}),l(C,{cols:"12"},{default:u(()=>[l(ke,{modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=m=>g.value=m),disabled:s.value,length:"6",variant:"filled",class:"rounded-sm",onFinish:k},null,8,["modelValue","disabled"])]),_:1}),l(C,{cols:"12"},{default:u(()=>[l(N,{block:"",color:"primary",type:"submit",variant:"outlined",loading:s.value},{default:u(()=>a[3]||(a[3]=[w(" Verificar ")])),_:1},8,["loading"])]),_:1}),l(C,{cols:"12",class:"text-center"},{default:u(()=>[a[5]||(a[5]=p("div",{class:"text-caption w-full"},"¿No recibiste el código?",-1)),l(N,{variant:"text",color:"dark",type:"button",density:"compact",loading:b.value,onClick:_},{default:u(()=>a[4]||(a[4]=[w(" Reenviar código ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}),l(S,{class:"text-center border-t text-subtitle-2"},{default:u(()=>[a[7]||(a[7]=w(" Ya tienes una cuenta? ")),l(F,{to:"/login",class:"link"},{default:u(()=>a[6]||(a[6]=[w(" Inicia sesión ")])),_:1})]),_:1})]),_:1})]),_:1}),p("div",we," © "+ce(new Date().getFullYear())+" Instituto de Informática - UNAP. v1.0 ",1)]),_:1})}}});export{Se as default};
